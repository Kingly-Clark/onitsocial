(()=>{var e={};e.id=1577,e.ids=[1577],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28186:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(6414),s(43028),s(35866),s(32029);var a=s(23191),r=s(88716),n=s(37922),o=s.n(n),l=s(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let c=["",{children:["(dashboard)",{children:["connections",{children:["callback",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6414)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/connections/callback/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,43028)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"/Users/tezferguson/gitProjects/onitsocial/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/connections/callback/page.tsx"],p="/(dashboard)/connections/callback/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/connections/callback/page",pathname:"/connections/callback",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},85068:(e,t,s)=>{Promise.resolve().then(s.bind(s,89148))},41291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3240:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},89148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(10326),r=s(17577),n=s(35047),o=s(78365),l=s(29752),i=s(91664),c=s(3240);let d=(0,s(25578).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var p=s(41291);function x(){(0,n.useSearchParams)();let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(null),[f,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)([]),[y,k]=(0,r.useState)(null);async function N(t){if(y){m(t),u(null);try{let s=await fetch("/api/connections/select-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileId:y.profileId,itemId:t,tempToken:y.tempToken,userProfile:y.userProfile,connectToken:y.connectToken,platform:y.platform})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to connect account")}await w(y.profileId,y.platform),b(!0),window.opener?(window.opener.postMessage({type:"CONNECTION_SUCCESS",platform:y.platform},"*"),setTimeout(()=>window.close(),1500)):setTimeout(()=>{e.push(`/brands?connected=${y.platform}`)},2e3)}catch(e){console.error("Error selecting item:",e),u(e instanceof Error?e.message:"Failed to connect account"),m(null)}}}async function w(e,t){let s=await fetch("/api/connections/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileId:e,platform:t})});if(!s.ok)throw Error((await s.json()).error||"Failed to save connection")}if(t)return a.jsx(o.r,{title:"Connecting...",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(c.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-brand-500"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading available pages..."})]})})});if(f)return a.jsx(o.r,{title:"Connected!",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(d,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Successfully Connected!"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Redirecting to your brand..."})]})})});if(h&&0===g.length)return a.jsx(o.r,{title:"Connection Error",children:a.jsx("div",{className:"max-w-md mx-auto mt-12 p-6",children:a.jsx(l.Zb,{className:"border-red-200 dark:border-red-800",children:a.jsx(l.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(p.Z,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-red-700 dark:text-red-300 mb-2",children:"Connection Failed"}),a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h}),a.jsx(i.z,{variant:"outline",className:"mt-4",onClick:()=>{window.opener?window.close():e.push("/connections")},children:window.opener?"Close":"Back to Connections"})]})]})})})})});let v=y?.platform?y.platform.charAt(0).toUpperCase()+y.platform.slice(1):"Account",C=y?.platform==="linkedin"?"Organization":y?.platform==="googlebusiness"?"Location":y?.platform==="pinterest"?"Board":"Page";return a.jsx(o.r,{title:`Connect ${v}`,children:a.jsx("div",{className:"max-w-2xl mx-auto p-6",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{className:"text-center",children:[(0,a.jsxs)(l.ll,{children:["Select a ",v," ",C]}),(0,a.jsxs)(l.SZ,{children:["Choose which ",C.toLowerCase()," you want to connect for posting"]})]}),(0,a.jsxs)(l.aY,{children:[h&&a.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-950 text-red-700 dark:text-red-300 text-sm",children:h}),a.jsx("div",{className:"grid gap-3",children:g.map(e=>a.jsx("button",{onClick:()=>N(e.id),disabled:null!==x,className:"p-4 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-brand-500 hover:shadow-md transition-all text-left disabled:opacity-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-50",children:e.name}),e.username&&(0,a.jsxs)("p",{className:"text-sm text-brand-600 dark:text-brand-400",children:["@",e.username]}),(e.category||e.type)&&a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:e.category||e.type})]}),x===e.id&&a.jsx(c.Z,{className:"h-5 w-5 animate-spin text-brand-500"})]})},e.id))})]})]})})})}},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>o,aY:()=>d,ll:()=>i});var a=s(10326),r=s(17577),n=s(51223);let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",e),...t}));o.displayName="Card";let l=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let i=r.forwardRef(({className:e,...t},s)=>a.jsx("h2",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));c.displayName="CardDescription";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},6414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/connections/callback/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,9702,4471,6582,434,532,3511],()=>s(28186));module.exports=a})();