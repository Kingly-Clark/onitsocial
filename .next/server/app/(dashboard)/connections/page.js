(()=>{var e={};e.id=5029,e.ids=[5029],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},94300:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(92799),s(43028),s(35866),s(32029);var a=s(23191),n=s(88716),r=s(37922),i=s.n(r),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["(dashboard)",{children:["connections",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,92799)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/connections/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,43028)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"/Users/tezferguson/gitProjects/onitsocial/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/connections/page.tsx"],m="/(dashboard)/connections/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(dashboard)/connections/page",pathname:"/connections",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48859:(e,t,s)=>{Promise.resolve().then(s.bind(s,49188))},32933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7027:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3240:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},49188:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(10326),n=s(17577),r=s(35047),i=s(78365),l=s(29752),o=s(91664),c=s(3594),d=s(3240),m=s(83855),x=s(7027),h=s(32933),p=s(94019),u=s(28605);function f(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)([]),[f,g]=(0,n.useState)(!0),[b,j]=(0,n.useState)(null),[y,w]=(0,n.useState)("");async function N(){try{let e=await fetch("/api/brands");if(!e.ok)throw Error("Failed to fetch brands");let t=await e.json(),a=await Promise.all(t.data.map(async e=>{let t=await fetch(`/api/brands/${e.id}`);return t.ok?(await t.json()).data:{...e,connected_accounts:[]}}));s(a)}catch(e){w(e instanceof Error?e.message:"Failed to load connections")}finally{g(!1)}}async function k(e,t){w(""),j(`${e}-${t}`);try{let s=await fetch("/api/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:e,platform:t})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to get connection URL")}let a=await s.json();if(a.data.url){let e=window.screenX+(window.outerWidth-600)/2,t=window.screenY+(window.outerHeight-700)/2,s=window.open(a.data.url,"OAuthConnect",`width=600,height=700,left=${e},top=${t}`);if(!s)throw Error("Popup blocked. Please allow popups for this site.");let n=setInterval(()=>{s.closed&&(clearInterval(n),j(null),N())},500)}}catch(e){w(e instanceof Error?e.message:"Failed to connect"),j(null)}}async function v(e){if(confirm("Are you sure you want to disconnect this account?"))try{let t=await fetch(`/api/connections/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disconnect")}N()}catch(e){w(e instanceof Error?e.message:"Failed to disconnect")}}if(f)return a.jsx(i.r,{title:"Connections",subtitle:"Manage your social media connections",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(d.Z,{className:"h-8 w-8 animate-spin text-brand-500"})})});let C=t.reduce((e,t)=>e+(t.connected_accounts?.length||0),0);return a.jsx(i.r,{title:"Connections",subtitle:"Manage your social media connections",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[y&&a.jsx("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-4 text-red-700 dark:text-red-300 text-sm",children:y}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold",children:t.length}),a.jsx("p",{className:"text-sm text-slate-500",children:"Total Brands"})]})}),a.jsx(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold",children:C}),a.jsx("p",{className:"text-sm text-slate-500",children:"Connected Accounts"})]})}),a.jsx(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold",children:u.VT.length}),a.jsx("p",{className:"text-sm text-slate-500",children:"Platforms Available"})]})})]}),0===t.length?a.jsx(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"py-12 text-center",children:[a.jsx("p",{className:"text-slate-500 mb-4",children:"No brands yet. Create a brand to connect social accounts."}),(0,a.jsxs)(o.z,{onClick:()=>e.push("/brands"),children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Create Brand"]})]})}):t.map(t=>(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:t.color||"#3b82f6"},children:t.name[0].toUpperCase()}),(0,a.jsxs)("div",{children:[a.jsx(l.ll,{className:"text-lg",children:t.name}),(0,a.jsxs)(l.SZ,{children:[t.connected_accounts?.length||0," connected accounts"]})]})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>e.push(`/brands/${t.id}/settings`),children:[a.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Settings"]})]})}),a.jsx(l.aY,{children:t.late_profile_id?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:u.VT.map(e=>{let s=t.connected_accounts?.find(t=>t.platform===e.id),n=b===`${t.id}-${e.id}`;return(0,a.jsxs)("div",{className:`p-4 rounded-lg border-2 transition-all ${s?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950/30":"border-slate-200 dark:border-slate-700"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-md flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),a.jsx("span",{className:"font-medium text-sm",children:e.label})]}),s&&a.jsx(h.Z,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),s?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.qE,{className:"h-6 w-6",children:[a.jsx(c.F$,{src:s.platform_avatar||void 0}),a.jsx(c.Q5,{className:"text-xs",children:s.platform_username?.[0]?.toUpperCase()||"?"})]}),(0,a.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400 truncate",children:["@",s.platform_username||"Connected"]})]}),(0,a.jsxs)(o.z,{size:"sm",variant:"destructive",className:"w-full",onClick:()=>v(s.id),children:[a.jsx(p.Z,{className:"h-3 w-3 mr-1"}),"Disconnect"]})]}):a.jsx(o.z,{size:"sm",className:"w-full",onClick:()=>k(t.id,e.id),disabled:n,children:n?(0,a.jsxs)(a.Fragment,{children:[a.jsx(d.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{className:"h-3 w-3 mr-1"}),"Connect"]})})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-4 text-amber-600 dark:text-amber-400",children:[a.jsx("p",{className:"text-sm",children:"This brand needs to be synced before connecting accounts."}),a.jsx(o.z,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>e.push(`/brands/${t.id}/settings`),children:"Go to Brand Settings"})]})})]},t.id))]})})}},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>i,aY:()=>d,ll:()=>o});var a=s(10326),n=s(17577),r=s(51223);let i=n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",e),...t}));i.displayName="Card";let l=n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=n.forwardRef(({className:e,...t},s)=>a.jsx("h2",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let c=n.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,r.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));c.displayName="CardDescription";let d=n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",n.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},28605:(e,t,s)=>{"use strict";s.d(t,{VT:()=>r,an:()=>a,kT:()=>n});let a={solo:1,starter:5,advanced:10},n={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},r=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]},92799:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/connections/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,9702,4471,6582,434,532,3511],()=>s(94300));module.exports=a})();