(()=>{var e={};e.id=372,e.ids=[372],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11631:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(25351),s(43028),s(35866),s(32029);var a=s(23191),r=s(88716),l=s(37922),n=s.n(l),i=s(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["(dashboard)",{children:["planner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,25351)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/planner/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,43028)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"/Users/tezferguson/gitProjects/onitsocial/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/planner/page.tsx"],x="/(dashboard)/planner/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/planner/page",pathname:"/planner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10987:(e,t,s)=>{Promise.resolve().then(s.bind(s,40511))},41291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},77636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(25578).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},40511:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(10326),r=s(17577),l=s(41291),n=s(78365),i=s(25578);let d=(0,i.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),c=(0,i.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var o=s(77636);let x=(0,i.Z)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var m=s(77506),p=s(91664),u=s(41190),h=s(82015),g=s(29752),f=s(38443),b=s(51223),j=s(25436),y=s(28605);let v={facebook:63206,instagram:2200,tiktok:2200,youtube:5e3,linkedin:3e3,google_business:2200};function N({onSuccess:e}){let{activeBrandId:t,accounts:s}=(0,j.o)(),n=(0,r.useRef)(null),[i,N]=(0,r.useState)([]),[k,w]=(0,r.useState)({}),[P,C]=(0,r.useState)([]),[S,_]=(0,r.useState)(""),[z,Z]=(0,r.useState)(!1),[q,E]=(0,r.useState)(""),[M,O]=(0,r.useState)("09:00"),[R,T]=(0,r.useState)("draft"),[A,I]=(0,r.useState)(!1),[U,G]=(0,r.useState)(!1),[L,$]=(0,r.useState)(null),[D,F]=(0,r.useState)([]),V=s.map(e=>e.platform).filter((e,t,s)=>s.indexOf(e)===t),W=()=>i.some(e=>(A?k[e]||"":k[i[0]]||"").length>v[e]),B=e=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},H=e=>{A?w(t=>({...t,[i[0]]:e})):w(t=>({...t,[i[0]]:e}))},J=e=>{e&&Array.from(e).forEach(e=>{if(!e.type.startsWith("image/")&&!e.type.startsWith("video/")){$({type:"error",text:"Only image and video files are supported"});return}let t=URL.createObjectURL(e);F(e=>[...e,t]),C(e=>[...e,t])})},X=e=>{F(t=>t.filter((t,s)=>s!==e)),C(t=>t.filter((t,s)=>s!==e))},Y=async()=>{if(!t||0===i.length){$({type:"error",text:"Select platforms to publish to"});return}let s=k[i[0]]||"";if(!s.trim()){$({type:"error",text:"Add content to your post"});return}if(W()){$({type:"error",text:"Content exceeds character limit for selected platform(s)"});return}G(!0),$(null);try{let a=A?{...k}:i.reduce((e,t)=>(e[t]=s,e),{}),r="draft",l=null;"publish"===R?r="published":"scheduled"===R&&(r="scheduled",l=`${q}T${M}:00`);let n=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:t,content:a,mediaUrls:P,platforms:i,status:r,scheduledFor:l,location:S||null})});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to create post")}$({type:"success",text:"publish"===R?"Post published successfully!":"scheduled"===R?"Post scheduled successfully!":"Post saved as draft!"}),N([]),w({}),C([]),F([]),_(""),Z(!1),E(""),O("09:00"),T("draft"),I(!1),e?.()}catch(e){$({type:"error",text:e instanceof Error?e.message:"Failed to create post"})}finally{G(!1)}},K=k[i[0]]||"";return(0,a.jsxs)(g.Zb,{className:"bg-white dark:bg-slate-950",children:[a.jsx(g.Ol,{children:a.jsx(g.ll,{children:"Compose Post"})}),(0,a.jsxs)(g.aY,{className:"space-y-6",children:[L&&(0,a.jsxs)("div",{className:(0,b.cn)("flex items-center gap-3 p-4 rounded-lg","success"===L.type?"bg-green-50 dark:bg-green-950 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-950 text-red-700 dark:text-red-300"),children:["success"===L.type?a.jsx(d,{className:"h-5 w-5 flex-shrink-0"}):a.jsx(l.Z,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium",children:L.text})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Select Platforms"}),0===V.length?a.jsx("div",{className:"rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700 p-6 text-center",children:a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"No connected platforms. Go to brand settings to connect your social accounts."})}):a.jsx("div",{className:"flex flex-wrap gap-2",children:y.VT.filter(e=>V.includes(e.id)).map(e=>{let t=i.includes(e.id);return a.jsx("button",{onClick:()=>B(e.id),className:(0,b.cn)("flex items-center justify-center gap-2 rounded-lg border-2 px-4 py-2.5 transition-all",t?"border-brand-500 bg-brand-50 dark:bg-brand-950 text-brand-700 dark:text-brand-300":"border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700"),children:a.jsx("span",{className:"text-sm font-medium",children:e.label})},e.id)})})]}),i.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-50 dark:bg-slate-900",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Customize per platform"}),a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Different content for each platform"})]}),a.jsx("button",{type:"button",onClick:()=>I(!A),className:(0,b.cn)("relative w-11 h-6 rounded-full transition-colors",A?"bg-brand-500":"bg-slate-200 dark:bg-slate-700"),children:a.jsx("div",{className:(0,b.cn)("absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform",A&&"translate-x-5")})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Content"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:[K.length," /"," ",v[i[0]]]}),K.length>v[i[0]]&&a.jsx(f.C,{variant:"destructive",children:"Over limit"})]})]}),a.jsx(h.g,{placeholder:"What's on your mind?",value:K,onChange:e=>H(e.target.value),className:"min-h-32 resize-none",maxLength:Math.max(...i.map(e=>v[e]))})]}),A&&i.length>1&&(0,a.jsxs)("div",{className:"space-y-3 pt-3 border-t border-slate-200 dark:border-slate-800",children:[a.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Platform-specific content preview"}),a.jsx("div",{className:"grid gap-3",children:i.map(e=>(0,a.jsxs)("div",{className:"space-y-1 p-2 rounded-lg bg-slate-50 dark:bg-slate-900",children:[a.jsx("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:y.VT.find(t=>t.id===e)?.label}),a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 line-clamp-2",children:k[e]||"(Same as default)"})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Media (Images & Videos)"}),(0,a.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700 p-4",children:[a.jsx("input",{ref:n,type:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>J(e.target.files),className:"hidden"}),(0,a.jsxs)("button",{type:"button",onClick:()=>n.current?.click(),className:"w-full flex items-center justify-center gap-2 py-6 hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors",children:[a.jsx(c,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click to upload or drag files"})]})]}),D.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2",children:D.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("img",{src:e,alt:`Preview ${t+1}`,className:"w-full h-20 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>X(t),className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center rounded-lg transition-opacity",children:a.jsx("span",{className:"text-white text-sm font-medium",children:"Remove"})})]},t))})]}),(0,a.jsxs)("div",{className:"grid gap-3 pt-3 border-t border-slate-200 dark:border-slate-800",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Location (Optional)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"h-4 w-4 text-slate-400"}),a.jsx(u.I,{placeholder:"Add location",value:S,onChange:e=>_(e.target.value),className:"flex-1"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(p.z,{type:"button",variant:"ghost",size:"sm",className:"gap-2",title:"Emoji picker (placeholder)",children:[a.jsx(x,{className:"h-4 w-4"}),"Emoji"]})})]}),z&&a.jsx("div",{className:"space-y-3 p-4 rounded-lg bg-slate-50 dark:bg-slate-900",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Date"}),a.jsx(u.I,{type:"date",value:q,onChange:e=>E(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Time"}),a.jsx(u.I,{type:"time",value:M,onChange:e=>O(e.target.value)})]})]})}),a.jsx("div",{className:"flex flex-col gap-3 pt-3 border-t border-slate-200 dark:border-slate-800",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(p.z,{onClick:()=>{T("draft"),Y()},variant:"secondary",disabled:U||0===i.length,className:"flex-1 gap-2",children:[U&&"draft"===R&&a.jsx(m.Z,{className:"h-4 w-4 animate-spin"}),"Save Draft"]}),(0,a.jsxs)(p.z,{onClick:()=>{T("scheduled"),z?Y():Z(!0)},variant:"outline",disabled:U||0===i.length,className:"gap-2",children:[U&&"scheduled"===R&&a.jsx(m.Z,{className:"h-4 w-4 animate-spin"}),"Schedule"]}),(0,a.jsxs)(p.z,{onClick:()=>{T("publish"),Y()},disabled:U||0===i.length||W(),className:"flex-1 gap-2",children:[U&&"publish"===R&&a.jsx(m.Z,{className:"h-4 w-4 animate-spin"}),"Post Now"]})]})})]})]})]})}var k=s(91589),w=s(35047);function P(){let{activeBrandId:e,getActiveBrand:t}=(0,j.o)();(0,w.useRouter)();let[s,i]=(0,r.useState)(0),d=t();return e?a.jsx(n.r,{title:"Planner",subtitle:d?.name?`Create content for ${d.name}`:"Create and schedule content",children:a.jsx("div",{className:"space-y-6 p-6",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(N,{onSuccess:()=>{i(e=>e+1)}})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx("div",{className:"sticky top-20",children:a.jsx(k.p,{},s)})})]})})}):a.jsx(n.r,{title:"Planner",subtitle:"Create and schedule content",children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx(l.Z,{className:"h-12 w-12 mx-auto text-amber-600 dark:text-amber-400"}),a.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50",children:"No Brand Selected"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Please select a brand to start planning content"})]})})})}},41190:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var a=s(10326),r=s(17577),l=s(51223);let n=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));n.displayName="Input"},82015:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var a=s(10326),r=s(17577),l=s(51223);let n=r.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));n.displayName="Textarea"},25351:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/planner/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,9702,4471,6582,434,532,3511,1589],()=>s(11631));module.exports=a})();