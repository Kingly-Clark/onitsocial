(()=>{var e={};e.id=8857,e.ids=[8857],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5650:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(8558),a(3028),a(5866),a(2029);var s=a(3191),r=a(8716),n=a(7922),d=a.n(n),l=a(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let o=["",{children:["(dashboard)",{children:["brands",{children:["[id]",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8558)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/brands/[id]/settings/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3028)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"/Users/tezferguson/gitProjects/onitsocial/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/brands/[id]/settings/page.tsx"],x="/(dashboard)/brands/[id]/settings/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/brands/[id]/settings/page",pathname:"/brands/[id]/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2966:(e,t,a)=>{Promise.resolve().then(a.bind(a,5884))},2933:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1291:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3240:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},1405:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},5884:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(326),r=a(7577),n=a(8587),d=a(434),l=a(1291);let i=(0,a(5578).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=a(1405),c=a(8365),x=a(7162),m=a(1664),h=a(1190),u=a(9752);let b=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#6366f1"];function p({params:e}){let t=(0,n.useRouter)(),{id:a}=e,[p,f]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0),[y,k]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[C,Z]=(0,r.useState)(""),[P,_]=(0,r.useState)(""),[E,F]=(0,r.useState)([]),[z,B]=(0,r.useState)({name:"",color:"#3b82f6"}),T=async e=>{if(e.preventDefault(),a){Z(""),_(""),k(!0);try{let e=await fetch(`/api/brands/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to update brand")}let t=await e.json();f(t.data),_("Brand updated successfully")}catch(e){Z(e instanceof Error?e.message:"An error occurred")}finally{k(!1)}}},M=async()=>{if(confirm("Are you sure? This will permanently delete the brand and all its data.")&&a){S(!0),Z("");try{let e=await fetch(`/api/brands/${a}`,{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete brand")}t.push("/brands")}catch(e){Z(e instanceof Error?e.message:"Failed to delete brand"),S(!1)}}},A=async()=>{if(!a)return;let e=await fetch(`/api/brands/${a}`);if(e.ok){let t=await e.json();f(t.data),F(t.data.connected_accounts||[])}},q=async()=>{if(a){Z(""),_(""),N(!0);try{let e=await fetch(`/api/brands/${a}/sync`,{method:"POST"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to sync brand")}let t=await fetch(`/api/brands/${a}`);if(t.ok){let e=await t.json();f(e.data),F(e.data.connected_accounts||[])}_("Brand synced successfully! You can now connect platforms.")}catch(e){Z(e instanceof Error?e.message:"Failed to sync brand")}finally{N(!1)}}};return g?s.jsx(c.r,{title:"Brand Settings",children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"h-96 rounded-lg bg-slate-200 dark:bg-slate-800 animate-pulse"})})}):p?s.jsx(c.r,{title:"Brand Settings",children:(0,s.jsxs)("div",{className:"space-y-6 p-6",children:[(0,s.jsxs)(d.default,{href:"/brands",className:"inline-flex items-center gap-2 text-brand-500 hover:text-brand-600",children:[s.jsx(i,{className:"h-4 w-4"}),"Back to Brands"]}),C&&(0,s.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[s.jsx(l.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:C})]}),P&&s.jsx("div",{className:"flex gap-3 rounded-lg bg-green-50 dark:bg-green-950 p-4 border border-green-200 dark:border-green-800",children:s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:P})}),(0,s.jsxs)(u.Zb,{children:[(0,s.jsxs)(u.Ol,{children:[s.jsx(u.ll,{children:"Brand Information"}),s.jsx(u.SZ,{children:"Update your brand name and appearance"})]}),s.jsx(u.aY,{children:(0,s.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Name"}),s.jsx(h.I,{value:z.name,onChange:e=>B(t=>({...t,name:e.target.value})),disabled:y,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-8",children:b.map(e=>s.jsx("button",{type:"button",onClick:()=>B(t=>({...t,color:e})),disabled:y,className:`h-10 rounded-md border-2 transition-all ${z.color===e?"border-slate-900 dark:border-slate-50":"border-transparent"}`,style:{backgroundColor:e},title:e},e))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(m.z,{type:"submit",disabled:y,children:y?"Saving...":"Save Changes"})})]})})]}),(0,s.jsxs)(u.Zb,{children:[(0,s.jsxs)(u.Ol,{children:[s.jsx(u.ll,{children:"Connected Platforms"}),s.jsx(u.SZ,{children:p.late_profile_id?`${E.length} of 6 platforms connected`:"Sync your brand to connect platforms"})]}),s.jsx(u.aY,{children:p.late_profile_id?s.jsx(x.E,{brandId:p.id,connectedAccounts:E,onConnect:A,onDisconnect:A}):s.jsx("div",{className:"rounded-lg border-2 border-dashed border-amber-300 dark:border-amber-700 bg-amber-50 dark:bg-amber-950 p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center gap-4",children:[s.jsx(l.Z,{className:"h-10 w-10 text-amber-600 dark:text-amber-400"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Brand Not Synced"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Your brand needs to be synced with the platform before you can connect social accounts."})]}),s.jsx(m.z,{onClick:q,disabled:v,className:"gap-2",children:v?(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.Z,{className:"h-4 w-4 animate-spin"}),"Syncing..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.Z,{className:"h-4 w-4"}),"Sync Brand Now"]})})]})})})]}),(0,s.jsxs)(u.Zb,{className:"border-red-200 dark:border-red-800",children:[(0,s.jsxs)(u.Ol,{children:[s.jsx(u.ll,{className:"text-red-600 dark:text-red-400",children:"Danger Zone"}),s.jsx(u.SZ,{children:"Irreversible and destructive actions"})]}),s.jsx(u.aY,{children:s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-50",children:"Delete Brand"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Permanently delete this brand and all associated data"})]}),s.jsx(m.z,{variant:"destructive",onClick:M,disabled:w,children:w?"Deleting...":"Delete"})]})})})]})]})}):s.jsx(c.r,{title:"Brand Settings",children:s.jsx("div",{className:"p-6",children:s.jsx(u.Zb,{className:"border-red-200 dark:border-red-800",children:s.jsx(u.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(l.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-red-700 dark:text-red-300",children:"Brand not found"}),s.jsx(d.default,{href:"/brands",children:s.jsx(m.z,{variant:"link",size:"sm",className:"mt-2",children:"Back to Brands"})})]})]})})})})})}},7162:(e,t,a)=>{"use strict";a.d(t,{E:()=>u});var s=a(326),r=a(7577),n=a(2933),d=a(3240),l=a(4019),i=a(3855),o=a(9752),c=a(1664),x=a(8443),m=a(3594),h=a(8605);function u({brandId:e,connectedAccounts:t=[],onConnect:a,onDisconnect:u}){let[b,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[j,y]=(0,r.useState)(""),k=new Set(t.map(e=>e.platform)),v=async t=>{y(""),p(t);try{let s=await fetch("/api/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:e,platform:t})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to get connection URL")}let r=await s.json();if(r.data.url){let e=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-600)/2,s=window.open(r.data.url,"OAuthConnect",`width=500,height=600,left=${e},top=${t}`);if(!s)throw Error("Failed to open connection window");let n=setInterval(()=>{s.closed&&(clearInterval(n),a?.())},500)}}catch(e){y(e instanceof Error?e.message:"Failed to connect platform")}finally{p(null)}},N=async e=>{if(confirm("Are you sure you want to disconnect this account?")){g(e),y("");try{let t=await fetch(`/api/connections/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disconnect account")}u?.(e)}catch(e){y(e instanceof Error?e.message:"Failed to disconnect account")}finally{g(null)}}};return s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-50 mb-4",children:"Connected Platforms"}),j&&s.jsx("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-3 mb-4 text-sm text-red-700 dark:text-red-300",children:j}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.VT.map(e=>{let a=k.has(e.id),r=t.find(t=>t.platform===e.id);return s.jsx(o.Zb,{className:`overflow-hidden transition-all ${a?"border-green-200 dark:border-green-800":""}`,children:(0,s.jsxs)(o.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-50",children:e.label}),a&&r?.platform_username&&(0,s.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["@",r.platform_username]})]})]}),a&&s.jsx(n.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"})]}),a&&r?.platform_avatar?(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3 p-2 rounded-lg bg-slate-50 dark:bg-slate-900",children:[(0,s.jsxs)(m.qE,{className:"h-8 w-8",children:[s.jsx(m.F$,{src:r.platform_avatar}),s.jsx(m.Q5,{children:r.platform_username?.[0]?.toUpperCase()||"A"})]}),(0,s.jsxs)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate",children:["Connected as ",r.platform_username]})]}):null,s.jsx("div",{className:"flex gap-2",children:a?s.jsx(c.z,{size:"sm",variant:"destructive",onClick:()=>r&&N(r.id),disabled:f===r?.id,className:"flex-1 gap-2",children:f===r?.id?(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Z,{className:"h-4 w-4 animate-spin"}),"Disconnecting..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Disconnect"]})}):s.jsx(c.z,{size:"sm",onClick:()=>v(e.id),disabled:b===e.id,className:"flex-1 gap-2",children:b===e.id?(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Z,{className:"h-4 w-4 animate-spin"}),"Connecting..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{className:"h-4 w-4"}),"Connect"]})})}),r?.status&&"active"!==r.status&&s.jsx(x.C,{variant:"secondary",className:"mt-2 w-full justify-center text-xs capitalize",children:r.status})]})},e.id)})})]})})}},8443:(e,t,a)=>{"use strict";a.d(t,{C:()=>l});var s=a(326);a(7577);var r=a(9360),n=a(1223);let d=(0,r.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border border-transparent bg-brand-500 text-white hover:bg-brand-600",secondary:"border border-transparent bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-700",destructive:"border border-transparent bg-red-500 text-white hover:bg-red-600",outline:"border border-slate-200 text-slate-950 dark:border-slate-800 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...a}){return s.jsx("div",{className:(0,n.cn)(d({variant:t}),e),...a})}},9752:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>l,SZ:()=>o,Zb:()=>d,aY:()=>c,ll:()=>i});var s=a(326),r=a(7577),n=a(1223);let d=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",e),...t}));d.displayName="Card";let l=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let i=r.forwardRef(({className:e,...t},a)=>s.jsx("h2",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let o=r.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,n.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},1190:(e,t,a)=>{"use strict";a.d(t,{I:()=>d});var s=a(326),r=a(7577),n=a(1223);let d=r.forwardRef(({className:e,type:t,...a},r)=>s.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));d.displayName="Input"},8605:(e,t,a)=>{"use strict";a.d(t,{VT:()=>n,an:()=>s,kT:()=>r});let s={solo:1,starter:5,advanced:10},r={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},n=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]},8558:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/brands/[id]/settings/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,9702,4471,6582,434,532,3511],()=>a(5650));module.exports=s})();