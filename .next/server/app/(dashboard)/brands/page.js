(()=>{var e={};e.id=9377,e.ids=[9377],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6219:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(4084),s(3028),s(5866),s(2029);var r=s(3191),a=s(8716),l=s(7922),d=s.n(l),n=s(5231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let o=["",{children:["(dashboard)",{children:["brands",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4084)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/brands/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3028)),"/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/tezferguson/gitProjects/onitsocial/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/brands/page.tsx"],x="/(dashboard)/brands/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/brands/page",pathname:"/brands",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9363:(e,t,s)=>{Promise.resolve().then(s.bind(s,524))},4230:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(5578).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(5578).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9447:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(5578).Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(5578).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},524:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(326),a=s(7577),l=s(434),d=s(1291),n=s(4230),i=s(2580),o=s(5436),c=s(8365),x=s(9447),m=s(8378),u=s(8091),b=s(9752),h=s(1664),p=s(8443),g=s(8605);function f({brand:e,connectedAccounts:t=[],onDelete:s}){let[d,n]=(0,a.useState)(!1),i=t.length,o=g.VT.length,c=t.map(e=>e.platform),f=g.VT.filter(e=>c.includes(e.id)),j=e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return r.jsx(b.Zb,{className:"overflow-hidden transition-all hover:shadow-lg",children:r.jsx(b.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:e.color||"#3b82f6"},children:e.logo_url?r.jsx("img",{src:e.logo_url,alt:e.name,className:"w-full h-full object-cover rounded-lg"}):j}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-50 truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i," of ",o," platforms"]})]})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{onClick:()=>n(!d),className:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800",children:r.jsx(x.Z,{className:"h-5 w-5 text-slate-400"})}),d&&(0,r.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg shadow-lg z-10",children:[(0,r.jsxs)(l.default,{href:`/brands/${e.id}/settings`,className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 first:rounded-t-lg",children:[r.jsx(m.Z,{className:"h-4 w-4"}),"Settings"]}),(0,r.jsxs)("button",{onClick:()=>{s?.(e.id),n(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950 w-full text-left last:rounded-b-lg",children:[r.jsx(u.Z,{className:"h-4 w-4"}),"Delete"]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Connected Platforms"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:f.length>0?f.map(e=>{let s=t.find(t=>t.platform===e.id);return(0,r.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md bg-slate-100 dark:bg-slate-800",children:[r.jsx("div",{className:"h-6 w-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),r.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:s?.platform_username||e.label})]},e.id)}):r.jsx(p.C,{variant:"secondary",className:"text-xs",children:"No platforms connected"})})]}),r.jsx(l.default,{href:`/brands/${e.id}/settings`,className:"block",children:r.jsx(h.z,{variant:"outline",size:"sm",className:"w-full",children:"View Settings"})})]})})})}var j=s(4118),v=s(1190);let k=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#6366f1"];function N({plan:e="solo",used:t=0,onSuccess:s,trigger:l}){let[n,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)(""),[u,b]=(0,a.useState)({name:"",color:k[0]}),f=g.an[e],N=t>=f,y=t>=f-1,w=async e=>{e.preventDefault(),m(""),c(!0);try{let e=await fetch("/api/brands",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create brand")}b({name:"",color:k[0]}),i(!1),s?.()}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{c(!1)}};return(0,r.jsxs)(j.Vq,{open:n,onOpenChange:i,children:[r.jsx(j.hg,{children:l||r.jsx(h.z,{className:"gap-2",children:r.jsx("span",{children:"Add Brand"})})}),(0,r.jsxs)(j.cZ,{className:"max-w-md",children:[r.jsx(j.fK,{children:r.jsx(j.$N,{children:"Create New Brand"})}),N&&(0,r.jsxs)("div",{className:"flex gap-3 rounded-lg bg-amber-50 dark:bg-amber-950 p-3 border border-amber-200 dark:border-amber-800",children:[r.jsx(d.Z,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-amber-700 dark:text-amber-300",children:[r.jsx("p",{className:"font-medium",children:"Brand limit reached"}),(0,r.jsxs)("p",{children:["You've reached the limit of ",f," brands for your"," ",e.charAt(0).toUpperCase()+e.slice(1)," plan."]})]})]}),y&&!N&&(0,r.jsxs)("div",{className:"flex gap-3 rounded-lg bg-blue-50 dark:bg-blue-950 p-3 border border-blue-200 dark:border-blue-800",children:[r.jsx(d.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[r.jsx("p",{className:"font-medium",children:"Approaching limit"}),r.jsx("p",{children:"You have 1 brand slot remaining. Consider upgrading for more."})]})]}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Name"}),r.jsx(v.I,{placeholder:"My Brand",value:u.name,onChange:e=>b(t=>({...t,name:e.target.value})),disabled:N||o,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Color"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:k.map(e=>r.jsx("button",{type:"button",onClick:()=>b(t=>({...t,color:e})),disabled:N||o,className:`h-10 rounded-md border-2 transition-all ${u.color===e?"border-slate-900 dark:border-slate-50":"border-transparent"}`,style:{backgroundColor:e},title:e},e))})]}),x&&r.jsx("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-3 text-sm text-red-700 dark:text-red-300",children:x}),(0,r.jsxs)(j.cN,{children:[r.jsx(h.z,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:o,children:"Cancel"}),r.jsx(h.z,{type:"submit",disabled:N||o||!u.name.trim(),className:"gap-2",children:o?"Creating...":"Create Brand"})]})]}),r.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Plan usage"}),(0,r.jsxs)(p.C,{variant:N?"destructive":"secondary",children:[t," of ",f," brands"]})]})})]})]})}function y(){let{user:e}=(0,i.L)(),{setBrands:t}=(0,o.o)(),[s,x]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[j,v]=(0,a.useState)(""),[k,y]=(0,a.useState)(""),[w,C]=(0,a.useState)(null),P=e?.subscription_plan||"solo",S=g.an[P],Z=s.length,_=S-Z,E=async e=>{if(confirm("Are you sure you want to delete this brand? This action cannot be undone.")){C(e),y("");try{let r=await fetch(`/api/brands/${e}`,{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to delete brand")}x(t=>t.filter(t=>t.id!==e)),t(s.filter(t=>t.id!==e))}catch(e){y(e instanceof Error?e.message:"Failed to delete brand")}finally{C(null)}}},M=async()=>{let e=await fetch("/api/brands");if(e.ok){let s=await e.json();x(s.data||[]),t(s.data||[])}};return m?r.jsx(c.r,{title:"Your Brands",subtitle:"Manage your brands and connected accounts",children:r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>r.jsx("div",{className:"h-64 rounded-lg bg-slate-200 dark:bg-slate-800 animate-pulse"},e))})})}):r.jsx(c.r,{title:"Your Brands",subtitle:"Manage your brands and connected accounts",children:(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Plan usage"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:[Z," of ",S]})]}),r.jsx("div",{className:"text-right",children:(0,r.jsxs)(p.C,{variant:0===_?"destructive":"secondary",children:[_," remaining"]})})]}),r.jsx(N,{plan:P,used:Z,onSuccess:M})]}),j&&(0,r.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[r.jsx(d.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-red-700 dark:text-red-300",children:"Error"}),r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j})]})]}),k&&(0,r.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[r.jsx(d.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:k})]}),0===_&&Z>0&&r.jsx(b.Zb,{className:"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950",children:r.jsx(b.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Upgrade your plan"}),(0,r.jsxs)("p",{className:"text-sm text-amber-800 dark:text-amber-200 mt-1",children:["You've reached the brand limit for your ",P," plan. Upgrade to add more brands."]})]}),r.jsx(l.default,{href:"/settings/billing",children:(0,r.jsxs)(h.z,{size:"sm",className:"gap-2",children:["Upgrade",r.jsx(n.Z,{className:"h-4 w-4"})]})})]})})}),s.length>0?r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>r.jsx(f,{brand:e,connectedAccounts:e.connected_accounts,onDelete:e=>E(e)},e.id))}):r.jsx(b.Zb,{className:"border-slate-200 dark:border-slate-800",children:r.jsx(b.aY,{className:"p-12",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:[r.jsx("div",{className:"h-16 w-16 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:r.jsx("svg",{className:"h-8 w-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m0 0h6m0-6h6"})})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50",children:"No brands yet"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Create your first brand to get started"})]}),r.jsx(N,{plan:P,used:Z,onSuccess:M,trigger:r.jsx(h.z,{children:"Create Your First Brand"})})]})})})]})})}},4118:(e,t,s)=>{"use strict";s.d(t,{$N:()=>u,Be:()=>b,Vq:()=>i,cN:()=>m,cZ:()=>c,fK:()=>x,hg:()=>o});var r=s(326),a=s(7577),l=s(1223);let d=a.createContext(void 0);function n(){let e=a.useContext(d);if(!e)throw Error("Dialog components must be used within Dialog");return e}function i({children:e,open:t,onOpenChange:s}){let l=a.useRef(null),[n,i]=a.useState(!1);return r.jsx(d.Provider,{value:{open:void 0!==t?t:n,setOpen:e=>{void 0===t&&i(e),s?.(e),e&&l.current?l.current.showModal():!e&&l.current&&l.current.close()},dialogRef:l},children:e})}let o=a.forwardRef(({onClick:e,...t},s)=>{let{setOpen:a}=n();return r.jsx("button",{ref:s,onClick:t=>{a(!0),e?.(t)},...t})});o.displayName="DialogTrigger";let c=a.forwardRef(({className:e,children:t,...s},d)=>{let{dialogRef:i,setOpen:o}=n(),c=a.useRef(null);return a.useLayoutEffect(()=>{let e=c.current;if(e){let t=()=>o(!1),s=e=>{e.preventDefault(),o(!1)};return e.addEventListener("close",t),e.addEventListener("cancel",s),()=>{e.removeEventListener("close",t),e.removeEventListener("cancel",s)}}},[o]),r.jsx("dialog",{ref:e=>{c.current=e,i.current=e,"function"==typeof d?d(e):d&&(d.current=e)},className:(0,l.cn)("max-h-[85vh] w-full max-w-lg rounded-lg border border-slate-200 bg-white shadow-lg backdrop:bg-black/50 dark:border-slate-800 dark:bg-slate-950 dark:backdrop:bg-slate-900/80",e),...s,children:t})});c.displayName="DialogContent";let x=({className:e,...t})=>r.jsx("div",{className:(0,l.cn)("flex flex-col space-y-1.5 border-b border-slate-200 p-6 dark:border-slate-800",e),...t});x.displayName="DialogHeader";let m=({className:e,...t})=>r.jsx("div",{className:(0,l.cn)("flex flex-col-reverse gap-2 border-t border-slate-200 p-6 dark:border-slate-800 sm:flex-row sm:justify-end",e),...t});m.displayName="DialogFooter";let u=a.forwardRef(({className:e,...t},s)=>r.jsx("h2",{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight text-slate-950 dark:text-slate-50",e),...t}));u.displayName="DialogTitle";let b=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));b.displayName="DialogDescription"},1190:(e,t,s)=>{"use strict";s.d(t,{I:()=>d});var r=s(326),a=s(7577),l=s(1223);let d=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));d.displayName="Input"},8605:(e,t,s)=>{"use strict";s.d(t,{VT:()=>l,an:()=>r,kT:()=>a});let r={solo:1,starter:5,advanced:10},a={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},l=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]},4084:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/brands/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,9702,4471,6582,434,1547,6152],()=>s(6219));module.exports=r})();