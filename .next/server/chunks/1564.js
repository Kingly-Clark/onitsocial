exports.id=1564,exports.ids=[1564],exports.modules={8588:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},9866:(e,t,a)=>{Promise.resolve().then(a.bind(a,802))},8370:()=>{},9447:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},7506:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8091:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},8587:(e,t,a)=>{"use strict";var s=a(7389);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},802:(e,t,a)=>{"use strict";a.d(t,{DashboardLayoutClient:()=>n});var s=a(326);a(7577);var r=a(2580),l=a(5436);function n({children:e,user:t,brands:a,accounts:n}){(0,r.L)(e=>e.setUser);let{setBrands:i,setActiveBrand:o,setAccounts:d}=(0,l.o)();return s.jsx(s.Fragment,{children:e})}},7568:(e,t,a)=>{"use strict";a.d(t,{y:()=>x});var s=a(326),r=a(7577),l=a(9447),n=a(5578);let i=(0,n.Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),o=(0,n.Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var d=a(8091),c=a(9752),u=a(8443),h=a(1223),b=a(8605);let f={draft:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",scheduled:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",published:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",failed:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"};function x({post:e,onEdit:t,onDelete:a,onClick:n}){let[x,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[v,k]=(0,r.useState)(!1),y=(()=>{let t=e.platforms[0];return e.content[t]||e.content[Object.keys(e.content)[0]]||""})(),j=x?y:y.substring(0,150),w=async()=>{if(confirm("Delete this post?")){k(!0);try{if(!(await fetch(`/api/posts/${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete post");a?.(e.id)}catch(e){console.error("Delete error:",e),alert("Failed to delete post")}finally{k(!1)}}},N=e.platforms.map(e=>b.VT.find(t=>t.id===e)||{id:e,label:e,color:"#999"});return s.jsx(c.Zb,{className:(0,h.cn)("cursor-pointer transition-all hover:shadow-md",n&&"hover:bg-slate-50 dark:hover:bg-slate-900"),onClick:()=>!g&&n?.(e),children:(0,s.jsxs)(c.aY,{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(u.C,{className:(0,h.cn)("text-xs font-semibold",f[e.status]),variant:"secondary",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),"scheduled"===e.status&&e.scheduled_for&&s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,h.p6)(e.scheduled_for)}),"published"===e.status&&e.published_at&&s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,h.SY)(e.published_at)})]}),s.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:N.map(e=>s.jsx(u.C,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),p(!g)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:s.jsx(l.Z,{className:"h-4 w-4 text-slate-400"})}),g&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg z-10",children:["draft"===e.status&&(0,s.jsxs)("button",{onClick:a=>{a.stopPropagation(),t?.(e),p(!1)},className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 first:rounded-t-lg",children:[s.jsx(i,{className:"h-4 w-4"}),"Edit"]}),"published"===e.status&&e.platform_post_urls&&Object.entries(e.platform_post_urls).map(([e,t])=>(0,s.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx(o,{className:"h-4 w-4"}),"View on ",e]},e)),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),w(),p(!1)},disabled:v,className:"w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/30 flex items-center gap-2 last:rounded-b-lg",children:[s.jsx(d.Z,{className:"h-4 w-4"}),v?"Deleting...":"Delete"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap",children:[j,y.length>150&&!x&&"..."]}),y.length>150&&s.jsx("button",{onClick:e=>{e.stopPropagation(),m(!x)},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:x?"Show less":"Show more"})]}),e.media_urls.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.media_urls.slice(0,4).map((t,a)=>(0,s.jsxs)("div",{className:"relative bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden",children:[s.jsx("img",{src:t,alt:`Media ${a+1}`,className:"w-full h-16 object-cover",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23f3f4f6' width='100' height='100'/%3E%3C/svg%3E"}}),3===a&&e.media_urls.length>4&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-white text-xs font-semibold",children:["+",e.media_urls.length-4]})})]},a))}),e.location&&(0,s.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["\uD83D\uDCCD ","object"==typeof e.location?e.location.name:e.location]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-800",children:[(0,s.jsxs)("span",{children:["Posted ",(0,h.SY)(e.created_at)]}),"scheduled"===e.status&&e.scheduled_for&&(0,s.jsxs)("span",{children:["Scheduled for ",(0,h.p6)(e.scheduled_for)]})]})]})})}},1589:(e,t,a)=>{"use strict";a.d(t,{p:()=>u});var s=a(326),r=a(7577),l=a(7506),n=a(384),i=a(1664),o=a(7568),d=a(5436);let c=[{value:"all",label:"All Posts"},{value:"drafts",label:"Drafts",status:"draft"},{value:"scheduled",label:"Scheduled",status:"scheduled"},{value:"published",label:"Published",status:"published"},{value:"failed",label:"Failed",status:"failed"}];function u({onEditPost:e,onPostsLoaded:t}){let{activeBrandId:a}=(0,d.o)(),[u,h]=(0,r.useState)("all"),[b,f]=(0,r.useState)([]),[x,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(null),[v,k]=(0,r.useState)(!1),[y,j]=(0,r.useState)(0),w=async(e=0)=>{if(a){m(!0),p(null);try{let s="all"===u?"":`&status=${c.find(e=>e.value===u)?.status}`,r=await fetch(`/api/posts?brandId=${a}&limit=20&offset=${e}${s}`);if(!r.ok)throw Error("Failed to fetch posts");let l=await r.json();f(0===e?l.data:[...b,...l.data]),j(e+20),k(l.count>e+20),t?.(l.data)}catch(e){p(e instanceof Error?e.message:"Failed to load posts")}finally{m(!1)}}},N=e=>{f(t=>t.filter(t=>t.id!==e))},S="all"===u?b:b.filter(e=>{let t=c.find(e=>e.value===u)?.status;return!t||e.status===t}),C=()=>s.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2,3].map(e=>s.jsx("div",{className:"h-32 rounded-lg bg-slate-200 dark:bg-slate-800"},e))});return s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)(n.mQ,{defaultValue:"all",value:u,onValueChange:e=>h(e),children:[s.jsx(n.dr,{className:"grid w-full grid-cols-5",children:c.map(e=>s.jsx(n.SP,{value:e.value,className:"text-xs sm:text-sm",children:e.label},e.value))}),c.map(t=>s.jsx(n.nU,{value:t.value,className:"space-y-4 mt-4",children:x&&0===S.length?s.jsx(C,{}):g&&0===S.length?s.jsx("div",{className:"rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950 p-4 text-sm text-red-700 dark:text-red-300",children:g}):0===S.length?s.jsx("div",{className:"rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700 p-8 text-center",children:s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"all"===u?"No posts yet. Create your first post to get started!":`No ${t.label.toLowerCase()} yet.`})}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:S.map(t=>s.jsx(o.y,{post:t,onEdit:e,onDelete:N},t.id))}),v&&s.jsx("div",{className:"flex justify-center pt-4",children:(0,s.jsxs)(i.z,{onClick:()=>w(y),disabled:x,variant:"outline",className:"gap-2",children:[x&&s.jsx(l.Z,{className:"h-4 w-4 animate-spin"}),"Load More"]})})]})},t.value))]})})}},8443:(e,t,a)=>{"use strict";a.d(t,{C:()=>i});var s=a(326);a(7577);var r=a(9360),l=a(1223);let n=(0,r.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border border-transparent bg-brand-500 text-white hover:bg-brand-600",secondary:"border border-transparent bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-700",destructive:"border border-transparent bg-red-500 text-white hover:bg-red-600",outline:"border border-slate-200 text-slate-950 dark:border-slate-800 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...a}){return s.jsx("div",{className:(0,l.cn)(n({variant:t}),e),...a})}},1664:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(326),r=a(7577),l=a(9360),n=a(1223);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-brand-500 text-white hover:bg-brand-600 active:bg-brand-700",destructive:"bg-red-500 text-white hover:bg-red-600 active:bg-red-700",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/70",link:"text-brand-500 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:t,size:a,...r},l)=>s.jsx("button",{className:(0,n.cn)(i({variant:t,size:a,className:e})),ref:l,...r}));o.displayName="Button"},9752:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>o});var s=a(326),r=a(7577),l=a(1223);let n=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",e),...t}));n.displayName="Card";let i=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let o=r.forwardRef(({className:e,...t},a)=>s.jsx("h2",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=r.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},384:(e,t,a)=>{"use strict";a.d(t,{SP:()=>c,dr:()=>d,mQ:()=>o,nU:()=>u});var s=a(326),r=a(7577),l=a(1223);let n=r.createContext(void 0);function i(){let e=r.useContext(n);if(!e)throw Error("Tabs components must be used within Tabs");return e}function o({children:e,defaultValue:t,value:a,onValueChange:l}){let[i,o]=r.useState(t);return s.jsx(n.Provider,{value:{activeTab:void 0!==a?a:i,setActiveTab:e=>{void 0===a&&o(e),l?.(e)}},children:e})}let d=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500 dark:bg-slate-800 dark:text-slate-400",e),...t}));d.displayName="TabsList";let c=r.forwardRef(({className:e,value:t,onClick:a,...r},n)=>{let{activeTab:o,setActiveTab:d}=i(),c=o===t;return s.jsx("button",{ref:n,onClick:e=>{d(t),a?.(e)},className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c?"bg-white text-slate-950 shadow-sm dark:bg-slate-950 dark:text-slate-50":"text-slate-600 hover:text-slate-950 dark:text-slate-400 dark:hover:text-slate-50",e),...r})});c.displayName="TabsTrigger";let u=r.forwardRef(({className:e,value:t,...a},r)=>{let{activeTab:n}=i();return n!==t?null:s.jsx("div",{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a})});u.displayName="TabsContent"},1223:(e,t,a)=>{"use strict";a.d(t,{SY:()=>o,S_:()=>d,cn:()=>l,p6:()=>n,uf:()=>i});var s=a(1135),r=a(1009);function l(...e){return(0,r.m6)((0,s.W)(e))}function n(e,t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",...t}).format(new Date(e))}function i(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()}function o(e){let t=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(t<1)return"just now";if(t<60)return`${t}m ago`;let a=Math.floor(t/60);if(a<24)return`${a}h ago`;let s=Math.floor(a/24);return s<7?`${s}d ago`:n(e)}function d(e){return({facebook:"#1877F2",instagram:"#E4405F",tiktok:"#000000",youtube:"#FF0000",linkedin:"#0A66C2",google_business:"#4285F4"})[e]||"#6B7280"}},5436:(e,t,a)=>{"use strict";a.d(t,{o:()=>s});let s=(0,a(8408).U)((e,t)=>({brands:[],activeBrandId:null,accounts:[],setBrands:t=>e({brands:t}),setActiveBrand:t=>e({activeBrandId:t}),setAccounts:t=>e({accounts:t}),getActiveBrand:()=>{let{brands:e,activeBrandId:a}=t();return e.find(e=>e.id===a)}}))},2580:(e,t,a)=>{"use strict";a.d(t,{L:()=>s});let s=(0,a(8408).U)(e=>({user:null,isLoading:!0,setUser:t=>e({user:t,isLoading:!1}),setLoading:t=>e({isLoading:t})}))},8605:(e,t,a)=>{"use strict";a.d(t,{VT:()=>l,an:()=>s,kT:()=>r});let s={solo:1,starter:5,advanced:10},r={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},l=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]},3028:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(9510),r=a(8585),l=a(5655);let n=(0,a(8570).createProxy)(String.raw`/Users/tezferguson/gitProjects/onitsocial/src/app/(dashboard)/(dashboard-client)/layout-client.tsx#DashboardLayoutClient`);async function i({children:e}){let t=await (0,l.f)(),{data:{session:a}}=await t.auth.getSession();a||(0,r.redirect)("/auth/login");let{data:i,error:o}=await t.from("users").select("*").eq("id",a.user.id).single();(o||!i)&&(0,r.redirect)("/auth/login");let{data:d}=await t.from("brands").select("*").eq("user_id",a.user.id),{data:c}=await t.from("connected_accounts").select("*");return s.jsx(n,{user:i,brands:d||[],accounts:c||[],children:e})}},2029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>r});var s=a(9510);a(5023);let r={title:"Onit - Social Media Management",description:"Manage all your social media brands from one dashboard. Schedule posts, track analytics, and manage your inbox across Facebook, Instagram, TikTok, YouTube, LinkedIn, and Google Business.",keywords:["social media management","scheduling","analytics","instagram","tiktok","facebook"]};function l({children:e}){return s.jsx("html",{lang:"en",className:"h-full",children:s.jsx("body",{className:"h-full font-sans",children:e})})}},5655:(e,t,a)=>{"use strict";a.d(t,{f:()=>l,k:()=>n});var s=a(7721),r=a(1615);async function l(){let e=await (0,r.cookies)();return(0,s.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{get:t=>e.get(t)?.value,set(t,a,s){try{e.set({name:t,value:a,...s})}catch{}},remove(t,a){try{e.set({name:t,value:"",...a})}catch{}}}})}async function n(){let{createClient:e}=await Promise.resolve().then(a.bind(a,7857));return e(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}},5023:()=>{}};