"use strict";exports.id=1589,exports.ids=[1589],exports.modules={9447:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},7027:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},7506:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8091:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(5578).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},6681:(e,t,a)=>{a.d(t,{y:()=>h});var s=a(326),l=a(7577),r=a(9447);let d=(0,a(5578).Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var i=a(7027),o=a(8091),n=a(9752),c=a(8443),x=a(1223),u=a(8605);let b={draft:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",scheduled:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",published:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",failed:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"};function h({post:e,onEdit:t,onDelete:a,onClick:h}){let[m,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[v,k]=(0,l.useState)(!1),j=(()=>{let t=e.platforms[0];return e.content[t]||e.content[Object.keys(e.content)[0]]||""})(),y=m?j:j.substring(0,150),N=async()=>{if(confirm("Delete this post?")){k(!0);try{if(!(await fetch(`/api/posts/${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete post");a?.(e.id)}catch(e){console.error("Delete error:",e),alert("Failed to delete post")}finally{k(!1)}}},w=e.platforms.map(e=>u.VT.find(t=>t.id===e)||{id:e,label:e,color:"#999"});return s.jsx(n.Zb,{className:(0,x.cn)("cursor-pointer transition-all hover:shadow-md",h&&"hover:bg-slate-50 dark:hover:bg-slate-900"),onClick:()=>!p&&h?.(e),children:(0,s.jsxs)(n.aY,{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(c.C,{className:(0,x.cn)("text-xs font-semibold",b[e.status]),variant:"secondary",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),"scheduled"===e.status&&e.scheduled_for&&s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,x.p6)(e.scheduled_for)}),"published"===e.status&&e.published_at&&s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,x.SY)(e.published_at)})]}),s.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:w.map(e=>s.jsx(c.C,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),g(!p)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:s.jsx(r.Z,{className:"h-4 w-4 text-slate-400"})}),p&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg z-10",children:["draft"===e.status&&(0,s.jsxs)("button",{onClick:a=>{a.stopPropagation(),t?.(e),g(!1)},className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 first:rounded-t-lg",children:[s.jsx(d,{className:"h-4 w-4"}),"Edit"]}),"published"===e.status&&e.platform_post_urls&&Object.entries(e.platform_post_urls).map(([e,t])=>(0,s.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx(i.Z,{className:"h-4 w-4"}),"View on ",e]},e)),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),N(),g(!1)},disabled:v,className:"w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/30 flex items-center gap-2 last:rounded-b-lg",children:[s.jsx(o.Z,{className:"h-4 w-4"}),v?"Deleting...":"Delete"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap",children:[y,j.length>150&&!m&&"..."]}),j.length>150&&s.jsx("button",{onClick:e=>{e.stopPropagation(),f(!m)},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:m?"Show less":"Show more"})]}),e.media_urls.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.media_urls.slice(0,4).map((t,a)=>(0,s.jsxs)("div",{className:"relative bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden",children:[s.jsx("img",{src:t,alt:`Media ${a+1}`,className:"w-full h-16 object-cover",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23f3f4f6' width='100' height='100'/%3E%3C/svg%3E"}}),3===a&&e.media_urls.length>4&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-white text-xs font-semibold",children:["+",e.media_urls.length-4]})})]},a))}),e.location&&(0,s.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["\uD83D\uDCCD ","object"==typeof e.location?e.location.name:e.location]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-800",children:[(0,s.jsxs)("span",{children:["Posted ",(0,x.SY)(e.created_at)]}),"scheduled"===e.status&&e.scheduled_for&&(0,s.jsxs)("span",{children:["Scheduled for ",(0,x.p6)(e.scheduled_for)]})]})]})})}},1589:(e,t,a)=>{a.d(t,{p:()=>x});var s=a(326),l=a(7577),r=a(7506),d=a(384),i=a(1664),o=a(6681),n=a(5436);let c=[{value:"all",label:"All Posts"},{value:"drafts",label:"Drafts",status:"draft"},{value:"scheduled",label:"Scheduled",status:"scheduled"},{value:"published",label:"Published",status:"published"},{value:"failed",label:"Failed",status:"failed"}];function x({onEditPost:e,onPostsLoaded:t}){let{activeBrandId:a}=(0,n.o)(),[x,u]=(0,l.useState)("all"),[b,h]=(0,l.useState)([]),[m,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)(null),[v,k]=(0,l.useState)(!1),[j,y]=(0,l.useState)(0),N=async(e=0)=>{if(a){f(!0),g(null);try{let s="all"===x?"":`&status=${c.find(e=>e.value===x)?.status}`,l=await fetch(`/api/posts?brandId=${a}&limit=20&offset=${e}${s}`);if(!l.ok)throw Error("Failed to fetch posts");let r=await l.json();h(0===e?r.data:[...b,...r.data]),y(e+20),k(r.count>e+20),t?.(r.data)}catch(e){g(e instanceof Error?e.message:"Failed to load posts")}finally{f(!1)}}},w=e=>{h(t=>t.filter(t=>t.id!==e))},C="all"===x?b:b.filter(e=>{let t=c.find(e=>e.value===x)?.status;return!t||e.status===t}),S=()=>s.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2,3].map(e=>s.jsx("div",{className:"h-32 rounded-lg bg-slate-200 dark:bg-slate-800"},e))});return s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)(d.mQ,{defaultValue:"all",value:x,onValueChange:e=>u(e),children:[s.jsx("div",{className:"overflow-x-auto -mx-1 px-1",children:s.jsx(d.dr,{className:"inline-flex w-max min-w-full sm:w-full sm:grid sm:grid-cols-5 gap-1",children:c.map(e=>s.jsx(d.SP,{value:e.value,className:"text-xs sm:text-sm whitespace-nowrap px-3 sm:px-2",children:e.label},e.value))})}),c.map(t=>s.jsx(d.nU,{value:t.value,className:"space-y-4 mt-4",children:m&&0===C.length?s.jsx(S,{}):p&&0===C.length?s.jsx("div",{className:"rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950 p-4 text-sm text-red-700 dark:text-red-300",children:p}):0===C.length?s.jsx("div",{className:"rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700 p-8 text-center",children:s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"all"===x?"No posts yet. Create your first post to get started!":`No ${t.label.toLowerCase()} yet.`})}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:C.map(t=>s.jsx(o.y,{post:t,onEdit:e,onDelete:w},t.id))}),v&&s.jsx("div",{className:"flex justify-center pt-4",children:(0,s.jsxs)(i.z,{onClick:()=>N(j),disabled:m,variant:"outline",className:"gap-2",children:[m&&s.jsx(r.Z,{className:"h-4 w-4 animate-spin"}),"Load More"]})})]})},t.value))]})})}},8443:(e,t,a)=>{a.d(t,{C:()=>i});var s=a(326);a(7577);var l=a(9360),r=a(1223);let d=(0,l.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border border-transparent bg-brand-500 text-white hover:bg-brand-600",secondary:"border border-transparent bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-700",destructive:"border border-transparent bg-red-500 text-white hover:bg-red-600",outline:"border border-slate-200 text-slate-950 dark:border-slate-800 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...a}){return s.jsx("div",{className:(0,r.cn)(d({variant:t}),e),...a})}},9752:(e,t,a)=>{a.d(t,{Ol:()=>i,SZ:()=>n,Zb:()=>d,aY:()=>c,ll:()=>o});var s=a(326),l=a(7577),r=a(1223);let d=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",e),...t}));d.displayName="Card";let i=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let o=l.forwardRef(({className:e,...t},a)=>s.jsx("h2",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let n=l.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,r.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t}));n.displayName="CardDescription";let c=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},384:(e,t,a)=>{a.d(t,{SP:()=>c,dr:()=>n,mQ:()=>o,nU:()=>x});var s=a(326),l=a(7577),r=a(1223);let d=l.createContext(void 0);function i(){let e=l.useContext(d);if(!e)throw Error("Tabs components must be used within Tabs");return e}function o({children:e,defaultValue:t,value:a,onValueChange:r}){let[i,o]=l.useState(t);return s.jsx(d.Provider,{value:{activeTab:void 0!==a?a:i,setActiveTab:e=>{void 0===a&&o(e),r?.(e)}},children:e})}let n=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500 dark:bg-slate-800 dark:text-slate-400",e),...t}));n.displayName="TabsList";let c=l.forwardRef(({className:e,value:t,onClick:a,...l},d)=>{let{activeTab:o,setActiveTab:n}=i(),c=o===t;return s.jsx("button",{ref:d,onClick:e=>{n(t),a?.(e)},className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c?"bg-white text-slate-950 shadow-sm dark:bg-slate-950 dark:text-slate-50":"text-slate-600 hover:text-slate-950 dark:text-slate-400 dark:hover:text-slate-50",e),...l})});c.displayName="TabsTrigger";let x=l.forwardRef(({className:e,value:t,...a},l)=>{let{activeTab:d}=i();return d!==t?null:s.jsx("div",{ref:l,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a})});x.displayName="TabsContent"},8605:(e,t,a)=>{a.d(t,{VT:()=>r,an:()=>s,kT:()=>l});let s={solo:1,starter:5,advanced:10},l={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},r=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}};