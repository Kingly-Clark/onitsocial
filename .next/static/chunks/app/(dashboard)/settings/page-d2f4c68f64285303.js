(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{34457:function(e,s,r){Promise.resolve().then(r.bind(r,13576))},13576:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return k}});var t=r(57437),a=r(2265),l=r(4079),n=r(65640),i=r(12381),d=r(40279),c=r(79820),o=r(17168),u=r(74291),x=r(96246),m=r(93448);let f=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("select",{className:(0,m.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...a})});f.displayName="Select";var h=r(92369),p=r(66337),j=r(94766),g=r(76865),b=r(83229),v=r(87769),N=r(42208),w=r(18930);let y=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Asia/Singapore","Australia/Sydney","Australia/Melbourne","Pacific/Auckland"];function k(){var e;let{user:s}=(0,l.L)(),[r,m]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[E,S]=(0,a.useState)(""),[D,P]=(0,a.useState)(""),[T,Z]=(0,a.useState)(""),[A,R]=(0,a.useState)(""),[U,_]=(0,a.useState)(""),[F,L]=(0,a.useState)(""),[O,z]=(0,a.useState)(!1),[I,Y]=(0,a.useState)(!1),[M,q]=(0,a.useState)(!1),[H,B]=(0,a.useState)(""),[K,Q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s&&(S(s.full_name||""),P(s.timezone||"UTC"),Z(s.email||""))},[s]);let V=(e,s)=>{C({type:e,text:s}),setTimeout(()=>C(null),5e3)},$=async()=>{if(!E.trim()){V("error","Full name cannot be empty");return}m(!0);try{let e=await fetch("/api/user",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:E,timezone:D})}),s=await e.json();if(!e.ok){V("error",s.error||"Failed to update profile");return}V("success","Profile updated successfully")}catch(e){console.error("Profile update error:",e),V("error","An error occurred while updating your profile")}finally{m(!1)}},J=async()=>{if(!A||!U||!F){V("error","All password fields are required");return}if(U.length<8){V("error","New password must be at least 8 characters long");return}if(U!==F){V("error","New password and confirm password do not match");return}if(A===U){V("error","New password must be different from current password");return}m(!0);try{let e=await fetch("/api/user/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:A,newPassword:U})}),s=await e.json();if(!e.ok){V("error",s.error||"Failed to change password");return}R(""),_(""),L(""),V("success","Password changed successfully")}catch(e){console.error("Password change error:",e),V("error","An error occurred while changing your password")}finally{m(!1)}},G=async()=>{if("DELETE"!==H){V("error",'Please type "DELETE" to confirm');return}m(!0);try{let e=await fetch("/api/user/delete",{method:"DELETE"}),s=await e.json();if(!e.ok){V("error",s.error||"Failed to delete account");return}window.location.href="/"}catch(e){console.error("Delete account error:",e),V("error","An error occurred while deleting your account"),m(!1)}};return(0,t.jsx)(n.r,{title:"Settings",subtitle:"Manage your account and preferences",children:(0,t.jsxs)("div",{className:"space-y-6 p-6",children:[k&&(0,t.jsx)("div",{className:"rounded-lg px-4 py-3 ".concat("success"===k.type?"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-200"),children:k.text}),(0,t.jsx)("div",{children:(0,t.jsxs)(o.mQ,{defaultValue:"profile",children:[(0,t.jsxs)(o.dr,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(o.SP,{value:"profile",className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Profile"})]}),(0,t.jsxs)(o.SP,{value:"security",className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Security"})]}),(0,t.jsxs)(o.SP,{value:"notifications",className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Notifications"})]}),(0,t.jsxs)(o.SP,{value:"danger",className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Danger"})]})]}),(0,t.jsx)(o.nU,{value:"profile",children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Profile"}),(0,t.jsx)(c.SZ,{children:"Update your personal information"})]}),(0,t.jsxs)(c.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(x.qE,{className:"h-16 w-16",children:[(null==s?void 0:s.avatar_url)&&(0,t.jsx)(x.F$,{src:s.avatar_url,alt:s.full_name||"User"}),(0,t.jsx)(x.Q5,{children:(null==s?void 0:s.full_name)?s.full_name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):(null==s?void 0:null===(e=s.email)||void 0===e?void 0:e[0].toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Profile Picture"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Avatar from your email account"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"fullName",className:"text-sm font-medium",children:"Full Name"}),(0,t.jsx)(d.I,{id:"fullName",placeholder:"Your full name",value:E,onChange:e=>S(e.target.value),disabled:r})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),(0,t.jsx)(d.I,{id:"email",type:"email",placeholder:"Email",value:T,disabled:!0,className:"bg-slate-50 dark:bg-slate-900"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Your email cannot be changed"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"timezone",className:"text-sm font-medium",children:"Timezone"}),(0,t.jsx)(f,{id:"timezone",value:D,onChange:e=>P(e.target.value),disabled:r,children:y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)(i.z,{onClick:$,disabled:r,className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),r?"Saving...":"Save Changes"]})]})]})}),(0,t.jsx)(o.nU,{value:"security",children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Security"}),(0,t.jsx)(c.SZ,{children:"Manage your password and security settings"})]}),(0,t.jsx)(c.aY,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:"Change Password"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Update your password to keep your account secure"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"currentPassword",className:"text-sm font-medium",children:"Current Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.I,{id:"currentPassword",type:O?"text":"password",placeholder:"Enter your current password",value:A,onChange:e=>R(e.target.value),disabled:r}),(0,t.jsx)("button",{type:"button",onClick:()=>z(!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:O?(0,t.jsx)(v.Z,{className:"h-4 w-4"}):(0,t.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"text-sm font-medium",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.I,{id:"newPassword",type:I?"text":"password",placeholder:"Enter your new password (min 8 characters)",value:U,onChange:e=>_(e.target.value),disabled:r}),(0,t.jsx)("button",{type:"button",onClick:()=>Y(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:I?(0,t.jsx)(v.Z,{className:"h-4 w-4"}):(0,t.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.I,{id:"confirmPassword",type:M?"text":"password",placeholder:"Confirm your new password",value:F,onChange:e=>L(e.target.value),disabled:r}),(0,t.jsx)("button",{type:"button",onClick:()=>q(!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:M?(0,t.jsx)(v.Z,{className:"h-4 w-4"}):(0,t.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)(i.z,{onClick:J,disabled:r,className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),r?"Updating...":"Update Password"]})]})})]})}),(0,t.jsx)(o.nU,{value:"notifications",children:(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{children:"Notifications"}),(0,t.jsx)(c.SZ,{children:"Manage your notification preferences"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(j.Z,{className:"h-12 w-12 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Notification preferences coming soon"})]})})]})}),(0,t.jsx)(o.nU,{value:"danger",children:(0,t.jsxs)(c.Zb,{className:"border-red-200 dark:border-red-900",children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsx)(c.ll,{className:"text-red-600 dark:text-red-400",children:"Danger Zone"}),(0,t.jsx)(c.SZ,{children:"Irreversible and dangerous actions"})]}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("div",{className:"rounded-lg border-2 border-red-200 dark:border-red-900 bg-red-50 dark:bg-red-900/20 p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(g.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-red-900 dark:text-red-200",children:"Delete Account"}),(0,t.jsx)("p",{className:"text-sm text-red-800 dark:text-red-300 mt-1",children:"Permanently delete your account and all associated data. This action cannot be undone."})]})]}),(0,t.jsxs)(u.Vq,{open:K,onOpenChange:Q,children:[(0,t.jsx)(u.hg,{children:(0,t.jsxs)(i.z,{variant:"destructive",className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),"Delete Account"]})}),(0,t.jsxs)(u.cZ,{children:[(0,t.jsxs)(u.fK,{children:[(0,t.jsx)(u.$N,{className:"text-red-600 dark:text-red-400",children:"Delete Account"}),(0,t.jsx)(u.Be,{children:"This action is permanent and cannot be undone. All your data will be deleted."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Deleting your account will:"}),(0,t.jsxs)("ul",{className:"text-sm text-red-800 dark:text-red-200 list-disc list-inside mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"Delete all your brands"}),(0,t.jsx)("li",{children:"Disconnect all social accounts"}),(0,t.jsx)("li",{children:"Delete all posts and schedules"}),(0,t.jsx)("li",{children:"Remove all analytics data"}),(0,t.jsx)("li",{children:"Delete all messages"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"confirmDelete",className:"text-sm font-medium",children:'Type "DELETE" to confirm:'}),(0,t.jsx)(d.I,{id:"confirmDelete",placeholder:'Type "DELETE"',value:H,onChange:e=>B(e.target.value.toUpperCase()),disabled:r})]})]}),(0,t.jsxs)(u.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>{Q(!1),B("")},disabled:r,children:"Cancel"}),(0,t.jsx)(i.z,{variant:"destructive",onClick:G,disabled:r||"DELETE"!==H,children:r?"Deleting...":"Delete Account"})]})]})]})]})})]})})]})})]})})}},79820:function(e,s,r){"use strict";r.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var t=r(57437),a=r(2265),l=r(93448);let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",r),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h2",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",r),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},74291:function(e,s,r){"use strict";r.d(s,{$N:function(){return m},Be:function(){return f},Vq:function(){return d},cN:function(){return x},cZ:function(){return o},fK:function(){return u},hg:function(){return c}});var t=r(57437),a=r(2265),l=r(93448);let n=a.createContext(void 0);function i(){let e=a.useContext(n);if(!e)throw Error("Dialog components must be used within Dialog");return e}function d(e){let{children:s,open:r,onOpenChange:l}=e,i=a.useRef(null),[d,c]=a.useState(!1);return(0,t.jsx)(n.Provider,{value:{open:void 0!==r?r:d,setOpen:e=>{void 0===r&&c(e),null==l||l(e),e&&i.current?i.current.showModal():!e&&i.current&&i.current.close()},dialogRef:i},children:s})}let c=a.forwardRef((e,s)=>{let{onClick:r,...a}=e,{setOpen:l}=i();return(0,t.jsx)("button",{ref:s,onClick:e=>{l(!0),null==r||r(e)},...a})});c.displayName="DialogTrigger";let o=a.forwardRef((e,s)=>{let{className:r,children:n,...d}=e,{dialogRef:c,setOpen:o}=i(),u=a.useRef(null);return a.useLayoutEffect(()=>{let e=u.current;if(e){let s=()=>o(!1),r=e=>{e.preventDefault(),o(!1)};return e.addEventListener("close",s),e.addEventListener("cancel",r),()=>{e.removeEventListener("close",s),e.removeEventListener("cancel",r)}}},[o]),(0,t.jsx)("dialog",{ref:e=>{u.current=e,c.current=e,"function"==typeof s?s(e):s&&(s.current=e)},className:(0,l.cn)("max-h-[85vh] w-full max-w-lg rounded-lg border border-slate-200 bg-white shadow-lg backdrop:bg-black/50 dark:border-slate-800 dark:bg-slate-950 dark:backdrop:bg-slate-900/80",r),...d,children:n})});o.displayName="DialogContent";let u=e=>{let{className:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 border-b border-slate-200 p-6 dark:border-slate-800",s),...r})};u.displayName="DialogHeader";let x=e=>{let{className:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse gap-2 border-t border-slate-200 p-6 dark:border-slate-800 sm:flex-row sm:justify-end",s),...r})};x.displayName="DialogFooter";let m=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h2",{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight text-slate-950 dark:text-slate-50",r),...a})});m.displayName="DialogTitle";let f=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",r),...a})});f.displayName="DialogDescription"},40279:function(e,s,r){"use strict";r.d(s,{I:function(){return n}});var t=r(57437),a=r(2265),l=r(93448);let n=a.forwardRef((e,s)=>{let{className:r,type:a,...n}=e;return(0,t.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...n})});n.displayName="Input"},17168:function(e,s,r){"use strict";r.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return d},nU:function(){return u}});var t=r(57437),a=r(2265),l=r(93448);let n=a.createContext(void 0);function i(){let e=a.useContext(n);if(!e)throw Error("Tabs components must be used within Tabs");return e}function d(e){let{children:s,defaultValue:r,value:l,onValueChange:i}=e,[d,c]=a.useState(r);return(0,t.jsx)(n.Provider,{value:{activeTab:void 0!==l?l:d,setActiveTab:e=>{void 0===l&&c(e),null==i||i(e)}},children:s})}let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500 dark:bg-slate-800 dark:text-slate-400",r),...a})});c.displayName="TabsList";let o=a.forwardRef((e,s)=>{let{className:r,value:a,onClick:n,...d}=e,{activeTab:c,setActiveTab:o}=i(),u=c===a;return(0,t.jsx)("button",{ref:s,onClick:e=>{o(a),null==n||n(e)},className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u?"bg-white text-slate-950 shadow-sm dark:bg-slate-950 dark:text-slate-50":"text-slate-600 hover:text-slate-950 dark:text-slate-400 dark:hover:text-slate-50",r),...d})});o.displayName="TabsTrigger";let u=a.forwardRef((e,s)=>{let{className:r,value:a,...n}=e,{activeTab:d}=i();return d!==a?null:(0,t.jsx)("div",{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})});u.displayName="TabsContent"}},function(e){e.O(0,[851,648,711,640,971,117,744],function(){return e(e.s=34457)}),_N_E=e.O()}]);