(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{63458:function(e,t,a){Promise.resolve().then(a.bind(a,18345))},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},96215:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},40875:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},49322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},99801:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},25466:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},29985:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},58293:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},82431:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},98728:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},15868:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(68755).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18345:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(57437),n=a(2265),s=a(99376),d=a(27648),c=a(49322);let l=(0,a(68755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var i=a(82431),o=a(65640),h=a(99029),u=a(12381),x=a(40279),m=a(79820);let f=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#6366f1"];function b(e){let{params:t}=e,a=(0,s.useRouter)(),{id:b}=t,[y,p]=(0,n.useState)(null),[k,j]=(0,n.useState)(!0),[g,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[Z,S]=(0,n.useState)(!1),[M,E]=(0,n.useState)(""),[B,C]=(0,n.useState)(""),[_,z]=(0,n.useState)([]),[O,F]=(0,n.useState)({name:"",color:"#3b82f6"});(0,n.useEffect)(()=>{(async()=>{try{j(!0);let e=await fetch("/api/brands/".concat(b));if(!e.ok)throw Error("Failed to fetch brand");let t=await e.json();p(t.data),z(t.data.connected_accounts||[]),F({name:t.data.name,color:t.data.color})}catch(e){E(e instanceof Error?e.message:"Failed to load brand")}finally{j(!1)}})()},[b]);let D=async e=>{if(e.preventDefault(),b){E(""),C(""),v(!0);try{let e=await fetch("/api/brands/".concat(b),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to update brand")}let t=await e.json();p(t.data),C("Brand updated successfully")}catch(e){E(e instanceof Error?e.message:"An error occurred")}finally{v(!1)}}},A=async()=>{if(confirm("Are you sure? This will permanently delete the brand and all its data.")&&b){S(!0),E("");try{let e=await fetch("/api/brands/".concat(b),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete brand")}a.push("/brands")}catch(e){E(e instanceof Error?e.message:"Failed to delete brand"),S(!1)}}},q=async()=>{if(!b)return;let e=await fetch("/api/brands/".concat(b));if(e.ok){let t=await e.json();p(t.data),z(t.data.connected_accounts||[])}},H=async()=>{if(b){E(""),C(""),w(!0);try{let e=await fetch("/api/brands/".concat(b,"/sync"),{method:"POST"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to sync brand")}let t=await fetch("/api/brands/".concat(b));if(t.ok){let e=await t.json();p(e.data),z(e.data.connected_accounts||[])}C("Brand synced successfully! You can now connect platforms.")}catch(e){E(e instanceof Error?e.message:"Failed to sync brand")}finally{w(!1)}}};return k?(0,r.jsx)(o.r,{title:"Brand Settings",children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"h-96 rounded-lg bg-slate-200 dark:bg-slate-800 animate-pulse"})})}):y?(0,r.jsx)(o.r,{title:"Brand Settings",children:(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)(d.default,{href:"/brands",className:"inline-flex items-center gap-2 text-brand-500 hover:text-brand-600",children:[(0,r.jsx)(l,{className:"h-4 w-4"}),"Back to Brands"]}),M&&(0,r.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:M})]}),B&&(0,r.jsx)("div",{className:"flex gap-3 rounded-lg bg-green-50 dark:bg-green-950 p-4 border border-green-200 dark:border-green-800",children:(0,r.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:B})}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsx)(m.ll,{children:"Brand Information"}),(0,r.jsx)(m.SZ,{children:"Update your brand name and appearance"})]}),(0,r.jsx)(m.aY,{children:(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Name"}),(0,r.jsx)(x.I,{value:O.name,onChange:e=>F(t=>({...t,name:e.target.value})),disabled:g,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Color"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-8",children:f.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>F(t=>({...t,color:e})),disabled:g,className:"h-10 rounded-md border-2 transition-all ".concat(O.color===e?"border-slate-900 dark:border-slate-50":"border-transparent"),style:{backgroundColor:e},title:e},e))})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(u.z,{type:"submit",disabled:g,children:g?"Saving...":"Save Changes"})})]})})]}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsx)(m.ll,{children:"Connected Platforms"}),(0,r.jsx)(m.SZ,{children:y.late_profile_id?"".concat(_.length," of 6 platforms connected"):"Sync your brand to connect platforms"})]}),(0,r.jsx)(m.aY,{children:y.late_profile_id?(0,r.jsx)(h.E,{brandId:y.id,connectedAccounts:_,onConnect:q,onDisconnect:q}):(0,r.jsx)("div",{className:"rounded-lg border-2 border-dashed border-amber-300 dark:border-amber-700 bg-amber-50 dark:bg-amber-950 p-6",children:(0,r.jsxs)("div",{className:"flex flex-col items-center text-center gap-4",children:[(0,r.jsx)(c.Z,{className:"h-10 w-10 text-amber-600 dark:text-amber-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Brand Not Synced"}),(0,r.jsx)("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Your brand needs to be synced with the platform before you can connect social accounts."})]}),(0,r.jsx)(u.z,{onClick:H,disabled:N,className:"gap-2",children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 animate-spin"}),"Syncing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),"Sync Brand Now"]})})]})})})]}),(0,r.jsxs)(m.Zb,{className:"border-red-200 dark:border-red-800",children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsx)(m.ll,{className:"text-red-600 dark:text-red-400",children:"Danger Zone"}),(0,r.jsx)(m.SZ,{children:"Irreversible and destructive actions"})]}),(0,r.jsx)(m.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-50",children:"Delete Brand"}),(0,r.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Permanently delete this brand and all associated data"})]}),(0,r.jsx)(u.z,{variant:"destructive",onClick:A,disabled:Z,children:Z?"Deleting...":"Delete"})]})})})]})]})}):(0,r.jsx)(o.r,{title:"Brand Settings",children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(m.Zb,{className:"border-red-200 dark:border-red-800",children:(0,r.jsx)(m.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-red-700 dark:text-red-300",children:"Brand not found"}),(0,r.jsx)(d.default,{href:"/brands",children:(0,r.jsx)(u.z,{variant:"link",size:"sm",className:"mt-2",children:"Back to Brands"})})]})]})})})})})}},3011:function(e,t,a){"use strict";a.d(t,{U:function(){return l}});var r=a(2265);let n=e=>{let t;let a=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),a.forEach(a=>a(t,e))}},n=()=>t,s={setState:r,getState:n,getInitialState:()=>d,subscribe:e=>(a.add(e),()=>a.delete(e))},d=t=e(r,n,s);return s},s=e=>e?n(e):n,d=e=>e,c=e=>{let t=s(e),a=e=>(function(e,t=d){let a=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(a),a})(t,e);return Object.assign(a,t),a},l=e=>e?c(e):c}},function(e){e.O(0,[569,648,640,346,971,117,744],function(){return e(e.s=63458)}),_N_E=e.O()}]);