(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{63458:function(e,t,a){Promise.resolve().then(a.bind(a,18345))},30401:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(68755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},49322:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(68755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},15001:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(68755).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},18345:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(57437),n=a(2265),r=a(99376),l=a(27648),d=a(49322);let i=(0,a(68755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var c=a(84083),o=a(99029),u=a(12381),m=a(40279),x=a(79820);let h=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#6366f1"];function f(e){let{params:t}=e,a=(0,r.useRouter)(),{id:f}=t,[b,j]=(0,n.useState)(null),[p,g]=(0,n.useState)(!0),[k,y]=(0,n.useState)(!1),[v,N]=(0,n.useState)(!1),[w,S]=(0,n.useState)(""),[E,C]=(0,n.useState)(""),[Z,F]=(0,n.useState)([]),[_,B]=(0,n.useState)({name:"",color:"#3b82f6"});(0,n.useEffect)(()=>{(async()=>{try{g(!0);let e=await fetch("/api/brands/".concat(f));if(!e.ok)throw Error("Failed to fetch brand");let t=await e.json();j(t.data),F(t.data.connected_accounts||[]),B({name:t.data.name,color:t.data.color})}catch(e){S(e instanceof Error?e.message:"Failed to load brand")}finally{g(!1)}})()},[f]);let T=async e=>{if(e.preventDefault(),f){S(""),C(""),y(!0);try{let e=await fetch("/api/brands/".concat(f),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to update brand")}let t=await e.json();j(t.data),C("Brand updated successfully")}catch(e){S(e instanceof Error?e.message:"An error occurred")}finally{y(!1)}}},z=async()=>{if(confirm("Are you sure? This will permanently delete the brand and all its data.")&&f){N(!0),S("");try{let e=await fetch("/api/brands/".concat(f),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete brand")}a.push("/brands")}catch(e){S(e instanceof Error?e.message:"Failed to delete brand"),N(!1)}}},I=async()=>{if(!f)return;let e=await fetch("/api/brands/".concat(f));e.ok&&F((await e.json()).data.connected_accounts||[])};return p?(0,s.jsx)(c.r,{title:"Brand Settings",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"h-96 rounded-lg bg-slate-200 dark:bg-slate-800 animate-pulse"})})}):b?(0,s.jsx)(c.r,{title:"Brand Settings",children:(0,s.jsxs)("div",{className:"space-y-6 p-6",children:[(0,s.jsxs)(l.default,{href:"/brands",className:"inline-flex items-center gap-2 text-brand-500 hover:text-brand-600",children:[(0,s.jsx)(i,{className:"h-4 w-4"}),"Back to Brands"]}),w&&(0,s.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:w})]}),E&&(0,s.jsx)("div",{className:"flex gap-3 rounded-lg bg-green-50 dark:bg-green-950 p-4 border border-green-200 dark:border-green-800",children:(0,s.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:E})}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsxs)(x.Ol,{children:[(0,s.jsx)(x.ll,{children:"Brand Information"}),(0,s.jsx)(x.SZ,{children:"Update your brand name and appearance"})]}),(0,s.jsx)(x.aY,{children:(0,s.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Name"}),(0,s.jsx)(m.I,{value:_.name,onChange:e=>B(t=>({...t,name:e.target.value})),disabled:k,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Color"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-8",children:h.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>B(t=>({...t,color:e})),disabled:k,className:"h-10 rounded-md border-2 transition-all ".concat(_.color===e?"border-slate-900 dark:border-slate-50":"border-transparent"),style:{backgroundColor:e},title:e},e))})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(u.z,{type:"submit",disabled:k,children:k?"Saving...":"Save Changes"})})]})})]}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsxs)(x.Ol,{children:[(0,s.jsx)(x.ll,{children:"Connected Platforms"}),(0,s.jsxs)(x.SZ,{children:[Z.length," of 6 platforms connected"]})]}),(0,s.jsx)(x.aY,{children:(0,s.jsx)(o.E,{brandId:b.id,connectedAccounts:Z,onConnect:I,onDisconnect:I})})]}),(0,s.jsxs)(x.Zb,{className:"border-red-200 dark:border-red-800",children:[(0,s.jsxs)(x.Ol,{children:[(0,s.jsx)(x.ll,{className:"text-red-600 dark:text-red-400",children:"Danger Zone"}),(0,s.jsx)(x.SZ,{children:"Irreversible and destructive actions"})]}),(0,s.jsx)(x.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-50",children:"Delete Brand"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Permanently delete this brand and all associated data"})]}),(0,s.jsx)(u.z,{variant:"destructive",onClick:z,disabled:v,children:v?"Deleting...":"Delete"})]})})})]})]})}):(0,s.jsx)(c.r,{title:"Brand Settings",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(x.Zb,{className:"border-red-200 dark:border-red-800",children:(0,s.jsx)(x.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-red-700 dark:text-red-300",children:"Brand not found"}),(0,s.jsx)(l.default,{href:"/brands",children:(0,s.jsx)(u.z,{variant:"link",size:"sm",className:"mt-2",children:"Back to Brands"})})]})]})})})})})}},99029:function(e,t,a){"use strict";a.d(t,{E:function(){return h}});var s=a(57437),n=a(2265),r=a(30401),l=a(15001),d=a(32489),i=a(99397),c=a(79820),o=a(12381),u=a(69174),m=a(96246),x=a(82566);function h(e){let{brandId:t,connectedAccounts:a=[],onConnect:h,onDisconnect:f}=e,[b,j]=(0,n.useState)(null),[p,g]=(0,n.useState)(null),[k,y]=(0,n.useState)(""),v=new Set(a.map(e=>e.platform)),N=async e=>{y(""),j(e);try{let a=await fetch("/api/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:t,platform:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to get connection URL")}let s=await a.json();if(s.data.url){let e=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-600)/2,a=window.open(s.data.url,"OAuthConnect","width=".concat(500,",height=").concat(600,",left=").concat(e,",top=").concat(t));if(!a)throw Error("Failed to open connection window");let n=setInterval(()=>{a.closed&&(clearInterval(n),null==h||h())},500)}}catch(e){y(e instanceof Error?e.message:"Failed to connect platform")}finally{j(null)}},w=async e=>{if(confirm("Are you sure you want to disconnect this account?")){g(e),y("");try{let t=await fetch("/api/connections/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disconnect account")}null==f||f(e)}catch(e){y(e instanceof Error?e.message:"Failed to disconnect account")}finally{g(null)}}};return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-50 mb-4",children:"Connected Platforms"}),k&&(0,s.jsx)("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-3 mb-4 text-sm text-red-700 dark:text-red-300",children:k}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.VT.map(e=>{var t,n;let x=v.has(e.id),h=a.find(t=>t.platform===e.id);return(0,s.jsx)(c.Zb,{className:"overflow-hidden transition-all ".concat(x?"border-green-200 dark:border-green-800":""),children:(0,s.jsxs)(c.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-50",children:e.label}),x&&(null==h?void 0:h.platform_username)&&(0,s.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["@",h.platform_username]})]})]}),x&&(0,s.jsx)(r.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"})]}),x&&(null==h?void 0:h.platform_avatar)?(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3 p-2 rounded-lg bg-slate-50 dark:bg-slate-900",children:[(0,s.jsxs)(m.qE,{className:"h-8 w-8",children:[(0,s.jsx)(m.F$,{src:h.platform_avatar}),(0,s.jsx)(m.Q5,{children:(null===(n=h.platform_username)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.toUpperCase())||"A"})]}),(0,s.jsxs)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate",children:["Connected as ",h.platform_username]})]}):null,(0,s.jsx)("div",{className:"flex gap-2",children:x?(0,s.jsx)(o.z,{size:"sm",variant:"destructive",onClick:()=>h&&w(h.id),disabled:p===(null==h?void 0:h.id),className:"flex-1 gap-2",children:p===(null==h?void 0:h.id)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),"Disconnecting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Disconnect"]})}):(0,s.jsx)(o.z,{size:"sm",onClick:()=>N(e.id),disabled:b===e.id,className:"flex-1 gap-2",children:b===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),"Connecting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),"Connect"]})})}),(null==h?void 0:h.status)&&"active"!==h.status&&(0,s.jsx)(u.C,{variant:"secondary",className:"mt-2 w-full justify-center text-xs capitalize",children:h.status})]})},e.id)})})]})})}},40279:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(57437),n=a(2265),r=a(93448);let l=n.forwardRef((e,t)=>{let{className:a,type:n,...l}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},82566:function(e,t,a){"use strict";a.d(t,{VT:function(){return r},an:function(){return s},kT:function(){return n}});let s={solo:1,starter:5,advanced:10},n={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},r=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}},function(e){e.O(0,[851,648,46,971,117,744],function(){return e(e.s=63458)}),_N_E=e.O()}]);