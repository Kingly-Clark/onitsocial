(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{29757:function(e,t,r){Promise.resolve().then(r.bind(r,98503))},76858:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},71533:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},18930:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},98503:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(57437),s=r(2265),l=r(27648),n=r(49322),d=r(76858),i=r(4079),c=r(9644),o=r(84083),x=r(71533),u=r(98728),m=r(18930),h=r(79820),b=r(12381),f=r(69174),g=r(82566);function p(e){let{brand:t,connectedAccounts:r=[],onDelete:n}=e,[d,i]=(0,s.useState)(!1),c=r.length,o=g.VT.length,p=r.map(e=>e.platform),j=g.VT.filter(e=>p.includes(e.id)),k=t.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,a.jsx)(h.Zb,{className:"overflow-hidden transition-all hover:shadow-lg",children:(0,a.jsx)(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:t.color||"#3b82f6"},children:t.logo_url?(0,a.jsx)("img",{src:t.logo_url,alt:t.name,className:"w-full h-full object-cover rounded-lg"}):k}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-50 truncate",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c," of ",o," platforms"]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>i(!d),className:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-slate-400"})}),d&&(0,a.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg shadow-lg z-10",children:[(0,a.jsxs)(l.default,{href:"/brands/".concat(t.id,"/settings"),className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 first:rounded-t-lg",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Settings"]}),(0,a.jsxs)("button",{onClick:()=>{null==n||n(t.id),i(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950 w-full text-left last:rounded-b-lg",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Delete"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Connected Platforms"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:j.length>0?j.map(e=>{let t=r.find(t=>t.platform===e.id);return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md bg-slate-100 dark:bg-slate-800",children:[(0,a.jsx)("div",{className:"h-6 w-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),(0,a.jsx)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:(null==t?void 0:t.platform_username)||e.label})]},e.id)}):(0,a.jsx)(f.C,{variant:"secondary",className:"text-xs",children:"No platforms connected"})})]}),(0,a.jsx)(l.default,{href:"/brands/".concat(t.id,"/settings"),className:"block",children:(0,a.jsx)(b.z,{variant:"outline",size:"sm",className:"w-full",children:"View Settings"})})]})})})}var j=r(74291),k=r(40279);let N=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#6366f1"];function v(e){let{plan:t="solo",used:r=0,onSuccess:l,trigger:d}=e,[i,c]=(0,s.useState)(!1),[o,x]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)({name:"",color:N[0]}),v=g.an[t],y=r>=v,w=r>=v-1,C=async e=>{e.preventDefault(),m(""),x(!0);try{let e=await fetch("/api/brands",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create brand")}p({name:"",color:N[0]}),c(!1),null==l||l()}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{x(!1)}};return(0,a.jsxs)(j.Vq,{open:i,onOpenChange:c,children:[(0,a.jsx)(j.hg,{children:d||(0,a.jsx)(b.z,{className:"gap-2",children:(0,a.jsx)("span",{children:"Add Brand"})})}),(0,a.jsxs)(j.cZ,{className:"max-w-md",children:[(0,a.jsx)(j.fK,{children:(0,a.jsx)(j.$N,{children:"Create New Brand"})}),y&&(0,a.jsxs)("div",{className:"flex gap-3 rounded-lg bg-amber-50 dark:bg-amber-950 p-3 border border-amber-200 dark:border-amber-800",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-amber-700 dark:text-amber-300",children:[(0,a.jsx)("p",{className:"font-medium",children:"Brand limit reached"}),(0,a.jsxs)("p",{children:["You've reached the limit of ",v," brands for your"," ",t.charAt(0).toUpperCase()+t.slice(1)," plan."]})]})]}),w&&!y&&(0,a.jsxs)("div",{className:"flex gap-3 rounded-lg bg-blue-50 dark:bg-blue-950 p-3 border border-blue-200 dark:border-blue-800",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,a.jsx)("p",{className:"font-medium",children:"Approaching limit"}),(0,a.jsx)("p",{children:"You have 1 brand slot remaining. Consider upgrading for more."})]})]}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Name"}),(0,a.jsx)(k.I,{placeholder:"My Brand",value:h.name,onChange:e=>p(t=>({...t,name:e.target.value})),disabled:y||o,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-50",children:"Brand Color"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:N.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>p(t=>({...t,color:e})),disabled:y||o,className:"h-10 rounded-md border-2 transition-all ".concat(h.color===e?"border-slate-900 dark:border-slate-50":"border-transparent"),style:{backgroundColor:e},title:e},e))})]}),u&&(0,a.jsx)("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-3 text-sm text-red-700 dark:text-red-300",children:u}),(0,a.jsxs)(j.cN,{children:[(0,a.jsx)(b.z,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:o,children:"Cancel"}),(0,a.jsx)(b.z,{type:"submit",disabled:y||o||!h.name.trim(),className:"gap-2",children:o?"Creating...":"Create Brand"})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Plan usage"}),(0,a.jsxs)(f.C,{variant:y?"destructive":"secondary",children:[r," of ",v," brands"]})]})})]})]})}function y(){let{user:e}=(0,i.L)(),{setBrands:t}=(0,c.o)(),[r,x]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[j,k]=(0,s.useState)(""),[N,y]=(0,s.useState)(""),[w,C]=(0,s.useState)(null),E=(null==e?void 0:e.subscription_plan)||"solo",Z=g.an[E],S=r.length,D=Z-S;(0,s.useEffect)(()=>{(async()=>{try{m(!0);let e=await fetch("/api/brands");if(!e.ok)throw Error("Failed to fetch brands");let r=await e.json();x(r.data||[]),t(r.data||[])}catch(e){k(e instanceof Error?e.message:"Failed to load brands")}finally{m(!1)}})()},[t]);let F=async e=>{if(confirm("Are you sure you want to delete this brand? This action cannot be undone.")){C(e),y("");try{let a=await fetch("/api/brands/".concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to delete brand")}x(t=>t.filter(t=>t.id!==e)),t(r.filter(t=>t.id!==e))}catch(e){y(e instanceof Error?e.message:"Failed to delete brand")}finally{C(null)}}},B=async()=>{let e=await fetch("/api/brands");if(e.ok){let r=await e.json();x(r.data||[]),t(r.data||[])}};return u?(0,a.jsx)(o.r,{title:"Your Brands",subtitle:"Manage your brands and connected accounts",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-64 rounded-lg bg-slate-200 dark:bg-slate-800 animate-pulse"},e))})})}):(0,a.jsx)(o.r,{title:"Your Brands",subtitle:"Manage your brands and connected accounts",children:(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Plan usage"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:[S," of ",Z]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)(f.C,{variant:0===D?"destructive":"secondary",children:[D," remaining"]})})]}),(0,a.jsx)(v,{plan:E,used:S,onSuccess:B})]}),j&&(0,a.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-red-700 dark:text-red-300",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:j})]})]}),N&&(0,a.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-50 dark:bg-red-950 p-4 border border-red-200 dark:border-red-800",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:N})]}),0===D&&S>0&&(0,a.jsx)(h.Zb,{className:"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950",children:(0,a.jsx)(h.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Upgrade your plan"}),(0,a.jsxs)("p",{className:"text-sm text-amber-800 dark:text-amber-200 mt-1",children:["You've reached the brand limit for your ",E," plan. Upgrade to add more brands."]})]}),(0,a.jsx)(l.default,{href:"/settings/billing",children:(0,a.jsxs)(b.z,{size:"sm",className:"gap-2",children:["Upgrade",(0,a.jsx)(d.Z,{className:"h-4 w-4"})]})})]})})}),r.length>0?(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>(0,a.jsx)(p,{brand:e,connectedAccounts:e.connected_accounts,onDelete:e=>F(e)},e.id))}):(0,a.jsx)(h.Zb,{className:"border-slate-200 dark:border-slate-800",children:(0,a.jsx)(h.aY,{className:"p-12",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"h-8 w-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m0 0h6m0-6h6"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50",children:"No brands yet"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Create your first brand to get started"})]}),(0,a.jsx)(v,{plan:E,used:S,onSuccess:B,trigger:(0,a.jsx)(b.z,{children:"Create Your First Brand"})})]})})})]})})}},74291:function(e,t,r){"use strict";r.d(t,{$N:function(){return m},Be:function(){return h},Vq:function(){return i},cN:function(){return u},cZ:function(){return o},fK:function(){return x},hg:function(){return c}});var a=r(57437),s=r(2265),l=r(93448);let n=s.createContext(void 0);function d(){let e=s.useContext(n);if(!e)throw Error("Dialog components must be used within Dialog");return e}function i(e){let{children:t,open:r,onOpenChange:l}=e,d=s.useRef(null),[i,c]=s.useState(!1);return(0,a.jsx)(n.Provider,{value:{open:void 0!==r?r:i,setOpen:e=>{void 0===r&&c(e),null==l||l(e),e&&d.current?d.current.showModal():!e&&d.current&&d.current.close()},dialogRef:d},children:t})}let c=s.forwardRef((e,t)=>{let{onClick:r,...s}=e,{setOpen:l}=d();return(0,a.jsx)("button",{ref:t,onClick:e=>{l(!0),null==r||r(e)},...s})});c.displayName="DialogTrigger";let o=s.forwardRef((e,t)=>{let{className:r,children:n,...i}=e,{dialogRef:c,setOpen:o}=d(),x=s.useRef(null);return s.useLayoutEffect(()=>{let e=x.current;if(e){let t=()=>o(!1),r=e=>{e.preventDefault(),o(!1)};return e.addEventListener("close",t),e.addEventListener("cancel",r),()=>{e.removeEventListener("close",t),e.removeEventListener("cancel",r)}}},[o]),(0,a.jsx)("dialog",{ref:e=>{x.current=e,c.current=e,"function"==typeof t?t(e):t&&(t.current=e)},className:(0,l.cn)("max-h-[85vh] w-full max-w-lg rounded-lg border border-slate-200 bg-white shadow-lg backdrop:bg-black/50 dark:border-slate-800 dark:bg-slate-950 dark:backdrop:bg-slate-900/80",r),...i,children:n})});o.displayName="DialogContent";let x=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 border-b border-slate-200 p-6 dark:border-slate-800",t),...r})};x.displayName="DialogHeader";let u=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse gap-2 border-t border-slate-200 p-6 dark:border-slate-800 sm:flex-row sm:justify-end",t),...r})};u.displayName="DialogFooter";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h2",{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight text-slate-950 dark:text-slate-50",r),...s})});m.displayName="DialogTitle";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",r),...s})});h.displayName="DialogDescription"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(57437),s=r(2265),l=r(93448);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},82566:function(e,t,r){"use strict";r.d(t,{VT:function(){return l},an:function(){return a},kT:function(){return s}});let a={solo:1,starter:5,advanced:10},s={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},l=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}},function(e){e.O(0,[851,648,46,971,117,744],function(){return e(e.s=29757)}),_N_E=e.O()}]);