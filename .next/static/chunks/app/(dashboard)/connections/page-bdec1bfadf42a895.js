(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{61566:function(e,t,n){Promise.resolve().then(n.bind(n,72712))},68755:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2265);let r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),i=e=>{let t=c(e);return t.charAt(0).toUpperCase()+t.slice(1)};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:h,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:n,strokeWidth:i?24*Number(c)/Number(s):c,className:r("lucide",d),...!u&&!o(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let n=(0,a.forwardRef)((n,c)=>{let{className:l,...o}=n;return(0,a.createElement)(d,{ref:c,iconNode:t,className:r("lucide-".concat(s(i(e))),"lucide-".concat(e),l),...o})});return n.displayName=i(e),n}},31047:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},96215:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},30401:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},40875:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},96362:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},99801:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},25466:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},29985:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},15001:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},58293:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},98728:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},15868:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},32489:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(68755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},99376:function(e,t,n){"use strict";var a=n(35475);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},72712:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(57437),r=n(2265),s=n(99376),c=n(65640),i=n(79820),l=n(12381),o=n(96246),d=n(15001),u=n(99397),h=n(96362),m=n(30401),f=n(32489),x=n(82566);function p(){let e=(0,s.useRouter)(),[t,n]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),[k,b]=(0,r.useState)(null),[g,j]=(0,r.useState)("");async function v(){try{let e=await fetch("/api/brands");if(!e.ok)throw Error("Failed to fetch brands");let t=await e.json(),a=await Promise.all(t.data.map(async e=>{let t=await fetch("/api/brands/".concat(e.id));return t.ok?(await t.json()).data:{...e,connected_accounts:[]}}));n(a)}catch(e){j(e instanceof Error?e.message:"Failed to load connections")}finally{y(!1)}}async function w(e,t){j(""),b("".concat(e,"-").concat(t));try{let n=await fetch("/api/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:e,platform:t})});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to get connection URL")}let a=await n.json();if(a.data.url){let e=window.screenX+(window.outerWidth-600)/2,t=window.screenY+(window.outerHeight-700)/2,n=window.open(a.data.url,"OAuthConnect","width=".concat(600,",height=").concat(700,",left=").concat(e,",top=").concat(t));if(!n)throw Error("Popup blocked. Please allow popups for this site.");let r=setInterval(()=>{n.closed&&(clearInterval(r),b(null),v())},500)}}catch(e){j(e instanceof Error?e.message:"Failed to connect"),b(null)}}async function N(e){if(confirm("Are you sure you want to disconnect this account?"))try{let t=await fetch("/api/connections/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disconnect")}v()}catch(e){j(e instanceof Error?e.message:"Failed to disconnect")}}if((0,r.useEffect)(()=>{v();let e=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.type)==="CONNECTION_SUCCESS"&&(b(null),v())};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]),p)return(0,a.jsx)(c.r,{title:"Connections",subtitle:"Manage your social media connections",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-brand-500"})})});let Z=t.reduce((e,t)=>{var n;return e+((null===(n=t.connected_accounts)||void 0===n?void 0:n.length)||0)},0);return(0,a.jsx)(c.r,{title:"Connections",subtitle:"Manage your social media connections",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[g&&(0,a.jsx)("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-4 text-red-700 dark:text-red-300 text-sm",children:g}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t.length}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Total Brands"})]})}),(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:Z}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Connected Accounts"})]})}),(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:x.VT.length}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Platforms Available"})]})})]}),0===t.length?(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"py-12 text-center",children:[(0,a.jsx)("p",{className:"text-slate-500 mb-4",children:"No brands yet. Create a brand to connect social accounts."}),(0,a.jsxs)(l.z,{onClick:()=>e.push("/brands"),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Create Brand"]})]})}):t.map(t=>{var n;return(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:t.color||"#3b82f6"},children:t.name[0].toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ll,{className:"text-lg",children:t.name}),(0,a.jsxs)(i.SZ,{children:[(null===(n=t.connected_accounts)||void 0===n?void 0:n.length)||0," connected accounts"]})]})]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>e.push("/brands/".concat(t.id,"/settings")),children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Settings"]})]})}),(0,a.jsx)(i.aY,{children:t.late_profile_id?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.VT.map(e=>{var n,r,s;let c=null===(n=t.connected_accounts)||void 0===n?void 0:n.find(t=>t.platform===e.id),i=k==="".concat(t.id,"-").concat(e.id);return(0,a.jsxs)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(c?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950/30":"border-slate-200 dark:border-slate-700"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-md flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label})]}),c&&(0,a.jsx)(m.Z,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),c?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(o.qE,{className:"h-6 w-6",children:[(0,a.jsx)(o.F$,{src:c.platform_avatar||void 0}),(0,a.jsx)(o.Q5,{className:"text-xs",children:(null===(s=c.platform_username)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:r.toUpperCase())||"?"})]}),(0,a.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400 truncate",children:["@",c.platform_username||"Connected"]})]}),(0,a.jsxs)(l.z,{size:"sm",variant:"destructive",className:"w-full",onClick:()=>N(c.id),children:[(0,a.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"Disconnect"]})]}):(0,a.jsx)(l.z,{size:"sm",className:"w-full",onClick:()=>w(t.id,e.id),disabled:i,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Connect"]})})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-4 text-amber-600 dark:text-amber-400",children:[(0,a.jsx)("p",{className:"text-sm",children:"This brand needs to be synced before connecting accounts."}),(0,a.jsx)(l.z,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>e.push("/brands/".concat(t.id,"/settings")),children:"Go to Brand Settings"})]})})]},t.id)})]})})}},79820:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return c},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var a=n(57437),r=n(2265),s=n(93448);let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",n),...r})});c.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("h2",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...r})});l.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-slate-500 dark:text-slate-400",n),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...r})});u.displayName="CardFooter"},82566:function(e,t,n){"use strict";n.d(t,{VT:function(){return s},an:function(){return a},kT:function(){return r}});let a={solo:1,starter:5,advanced:10},r={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},s=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]},3011:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var a=n(2265);let r=e=>{let t;let n=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s={setState:a,getState:r,getInitialState:()=>c,subscribe:e=>(n.add(e),()=>n.delete(e))},c=t=e(a,r,s);return s},s=e=>e?r(e):r,c=e=>e,i=e=>{let t=s(e),n=e=>(function(e,t=c){let n=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>t(e.getState()),[e,t]),a.useCallback(()=>t(e.getInitialState()),[e,t]));return a.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},l=e=>e?i(e):i}},function(e){e.O(0,[569,648,640,971,117,744],function(){return e(e.s=61566)}),_N_E=e.O()}]);