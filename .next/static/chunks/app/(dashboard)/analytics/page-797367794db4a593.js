(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{13123:function(e,a,s){Promise.resolve().then(s.bind(s,2379))},2379:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return W}});var t=s(57437),l=s(2265),r=s(74968),n=s(7768),i=s(9644),d=s(65640),c=s(12381),o=s(79820),m=s(82431),x=s(49322),h=s(40279);function u(e){let{from:a,to:s,onChange:i}=e,[d,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(a),[f,j]=(0,l.useState)(s),b=e=>{let a=new Date,s=(0,r.k)(a,e);i((0,n.WU)(s,"yyyy-MM-dd"),(0,n.WU)(a,"yyyy-MM-dd")),m(!1)};return(0,t.jsx)(o.Zb,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(c.z,{variant:d?"outline":"default",size:"sm",onClick:()=>{b(7),m(!1)},children:"Last 7 days"}),(0,t.jsx)(c.z,{variant:d?"outline":"default",size:"sm",onClick:()=>{b(30),m(!1)},children:"Last 30 days"}),(0,t.jsx)(c.z,{variant:d?"outline":"default",size:"sm",onClick:()=>{b(90),m(!1)},children:"Last 90 days"}),(0,t.jsx)(c.z,{variant:d?"default":"outline",size:"sm",onClick:()=>m(!0),children:"Custom"})]}),d&&(0,t.jsxs)("div",{className:"space-y-3 rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-800 dark:bg-slate-900",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"From"}),(0,t.jsx)(h.I,{type:"date",value:x,onChange:e=>u(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"To"}),(0,t.jsx)(h.I,{type:"date",value:f,onChange:e=>j(e.target.value),className:"mt-1"})]})]}),(0,t.jsx)(c.z,{size:"sm",onClick:()=>{x&&f&&i(x,f)},disabled:!x||!f,children:"Apply"})]}),(0,t.jsxs)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[a," to ",s]})]})})}var f=s(93448),j=s(95805),b=s(42208),p=s(55287),g=s(88997),y=s(28921),v=s(70525),k=s(3085);function N(e){let{data:a,previousPeriod:s}=e,l=(e,a)=>0===a?e>0?100:0:Math.round((e-a)/a*100),r=[{label:"Followers",value:a.followers,icon:j.Z,change:s?l(a.followers,s.followers):void 0},{label:"Impressions",value:a.impressions,icon:b.Z,change:s?l(a.impressions,s.impressions):void 0},{label:"Reach",value:a.reach,icon:p.Z,change:s?l(a.reach,s.reach):void 0},{label:"Engagement",value:a.engagement,icon:g.Z,change:s?l(a.engagement,s.engagement):void 0},{label:"Clicks",value:a.clicks,icon:y.Z,change:s?l(a.clicks,s.clicks):void 0}];return(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5",children:r.map(e=>{let a=e.icon,s=void 0===e.change||e.change>=0;return(0,t.jsx)(o.Zb,{children:(0,t.jsx)(o.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:e.label}),(0,t.jsx)("p",{className:"mt-2 text-2xl font-bold text-slate-900 dark:text-white",children:(0,f.uf)(e.value)}),void 0!==e.change&&(0,t.jsxs)("div",{className:"mt-2 flex items-center text-sm font-semibold ".concat(s?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[s?(0,t.jsx)(v.Z,{className:"mr-1 h-4 w-4"}):(0,t.jsx)(k.Z,{className:"mr-1 h-4 w-4"}),Math.abs(e.change),"%"]})]}),(0,t.jsx)(a,{className:"h-6 w-6 text-slate-400 dark:text-slate-600"})]})})},e.label)})})}var w=s(91436),Z=s(5481),S=s(56940),C=s(97059),M=s(62994),T=s(78155),D=s(53250),A=s(35637);function F(e){let{data:a}=e;if(!a||0===a.length)return(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{children:"Engagement Metrics"}),(0,t.jsx)(o.SZ,{children:"Track impressions, reach, engagement, and clicks over time"})]}),(0,t.jsx)(o.aY,{className:"flex h-80 items-center justify-center",children:(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"No data available"})})]});let s=a.map(e=>({...e,date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}));return(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{children:"Engagement Metrics"}),(0,t.jsx)(o.SZ,{children:"Track impressions, reach, engagement, and clicks over time"})]}),(0,t.jsx)(o.aY,{children:(0,t.jsx)(w.h,{width:"100%",height:300,children:(0,t.jsxs)(Z.T,{data:s,margin:{top:10,right:30,left:0,bottom:0},children:[(0,t.jsx)(S.q,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,t.jsx)(C.K,{dataKey:"date",stroke:"#64748b"}),(0,t.jsx)(M.B,{stroke:"#64748b"}),(0,t.jsx)(T.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"0.5rem"},labelStyle:{color:"#e2e8f0"}}),(0,t.jsx)(D.D,{}),(0,t.jsx)(A.uN,{type:"monotone",dataKey:"impressions",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",isAnimationActive:!1,name:"Impressions"}),(0,t.jsx)(A.uN,{type:"monotone",dataKey:"reach",stackId:"1",stroke:"#8b5cf6",fill:"#8b5cf6",isAnimationActive:!1,name:"Reach"}),(0,t.jsx)(A.uN,{type:"monotone",dataKey:"engagement",stackId:"1",stroke:"#ec4899",fill:"#ec4899",isAnimationActive:!1,name:"Engagement"}),(0,t.jsx)(A.uN,{type:"monotone",dataKey:"clicks",stackId:"1",stroke:"#10b981",fill:"#10b981",isAnimationActive:!1,name:"Clicks"})]})})})]})}var E=s(21156),I=s(30858),Y=s(82566);function z(e){let{data:a}=e;if(!a||0===a.length)return(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{children:"Follower Growth"}),(0,t.jsx)(o.SZ,{children:"Monitor your follower growth across connected platforms"})]}),(0,t.jsx)(o.aY,{className:"flex h-80 items-center justify-center",children:(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"No data available"})})]});let s=Array.from(new Set(a.map(e=>e.platform).filter(Boolean))),l=a.map(e=>({...e,date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),r=e=>{if(!e)return"#6b7280";let a=Y.VT.find(a=>a.id===e);return(null==a?void 0:a.color)||"#6b7280"};return(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{children:"Follower Growth"}),(0,t.jsx)(o.SZ,{children:"Monitor your follower growth across connected platforms"})]}),(0,t.jsx)(o.aY,{children:(0,t.jsx)(w.h,{width:"100%",height:300,children:(0,t.jsxs)(E.w,{data:l,margin:{top:10,right:30,left:0,bottom:0},children:[(0,t.jsx)(S.q,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,t.jsx)(C.K,{dataKey:"date",stroke:"#64748b"}),(0,t.jsx)(M.B,{stroke:"#64748b"}),(0,t.jsx)(T.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"0.5rem"},labelStyle:{color:"#e2e8f0"}}),(0,t.jsx)(D.D,{}),0===s.length?(0,t.jsx)(I.x1,{type:"monotone",dataKey:"followers",stroke:"#3b82f6",name:"Total Followers",dot:!1,isAnimationActive:!1}):s.map(e=>{var a;let s=(null===(a=Y.VT.find(a=>a.id===e))||void 0===a?void 0:a.label)||e||"Unknown";return(0,t.jsx)(I.x1,{type:"monotone",dataKey:a=>a.platform===e?a.followers:null,stroke:r(e),name:s,dot:!1,isAnimationActive:!1,connectNulls:!0},e)})]})})})]})}var R=s(79219),O=s(37760),_=s(22106),K=s(74767),B=s(50598),P=s(83774),U=s(29202);function L(e){let{platforms:a}=e,[s,r]=(0,l.useState)("followers"),[n,i]=(0,l.useState)("desc");if(!a||0===a.length)return(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{children:"Platform Breakdown"}),(0,t.jsx)(o.SZ,{children:"Performance metrics by platform"})]}),(0,t.jsx)(o.aY,{className:"flex h-64 items-center justify-center",children:(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"No platform data available"})})]});let d=[...a].sort((e,a)=>{let t=e[s],l=a[s];if("platform"===s){var r,i;t=(null===(r=Y.VT.find(a=>a.id===e.platform))||void 0===r?void 0:r.label)||e.platform,l=(null===(i=Y.VT.find(e=>e.id===a.platform))||void 0===i?void 0:i.label)||a.platform}return"string"==typeof t&&"string"==typeof l?"asc"===n?t.localeCompare(l):l.localeCompare(t):"asc"===n?t-l:l-t}),c=Math.max(...a.map(e=>e.followers),1),m=Math.max(...a.map(e=>e.impressions),1),x=Math.max(...a.map(e=>e.reach),1),h=Math.max(...a.map(e=>e.engagement),1),u=Math.max(...a.map(e=>e.clicks),1),j=e=>{switch(e){case"facebook":return R.Z;case"instagram":return O.Z;case"tiktok":return _.Z;case"youtube":return K.Z;case"linkedin":return B.Z;case"google_business":return P.Z;default:return U.Z}};return(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsx)(o.ll,{children:"Platform Breakdown"}),(0,t.jsx)(o.SZ,{children:"Performance metrics by platform"})]}),(0,t.jsx)(o.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:d.map(e=>{let a=j(e.platform),s=Y.VT.find(a=>a.id===e.platform);return(0,t.jsxs)("div",{className:"space-y-2 rounded-lg border border-slate-200 p-4 dark:border-slate-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a,{className:"h-5 w-5",style:{color:null==s?void 0:s.color}}),(0,t.jsx)("span",{className:"font-semibold",children:(null==s?void 0:s.label)||e.platform})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Followers"}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.uf)(e.followers)})]}),(0,t.jsx)("div",{className:"mt-1 h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,t.jsx)("div",{className:"h-full bg-blue-500",style:{width:"".concat(e.followers/c*100,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Impressions"}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.uf)(e.impressions)})]}),(0,t.jsx)("div",{className:"mt-1 h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,t.jsx)("div",{className:"h-full bg-purple-500",style:{width:"".concat(e.impressions/m*100,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Reach"}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.uf)(e.reach)})]}),(0,t.jsx)("div",{className:"mt-1 h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,t.jsx)("div",{className:"h-full bg-cyan-500",style:{width:"".concat(e.reach/x*100,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Engagement"}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.uf)(e.engagement)})]}),(0,t.jsx)("div",{className:"mt-1 h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,t.jsx)("div",{className:"h-full bg-pink-500",style:{width:"".concat(e.engagement/h*100,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:"Clicks"}),(0,t.jsx)("span",{className:"font-medium",children:(0,f.uf)(e.clicks)})]}),(0,t.jsx)("div",{className:"mt-1 h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:(0,t.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(e.clicks/u*100,"%")}})})]})]},e.platform)})})})]})}let V=e=>{let{className:a}=e;return(0,t.jsx)("div",{className:"animate-pulse rounded bg-slate-200 dark:bg-slate-800 ".concat(a)})};function W(){var e;let{activeBrandId:a}=(0,i.o)(),[s,h]=(0,l.useState)(""),[f,j]=(0,l.useState)(""),[b,p]=(0,l.useState)(null),[g,y]=(0,l.useState)(null),[v,k]=(0,l.useState)(!0),[w,Z]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=new Date,a=(0,r.k)(e,30);h((0,n.WU)(a,"yyyy-MM-dd")),j((0,n.WU)(e,"yyyy-MM-dd"))},[]);let M=async()=>{if(a&&s&&f){k(!0),C(null);try{let e=await fetch("/api/analytics?brand_id=".concat(a,"&from=").concat(s,"&to=").concat(f));if(!e.ok)throw Error("Failed to fetch analytics");let t=await e.json();p(t.data||t);let l=Math.floor((new Date(f).getTime()-new Date(s).getTime())/864e5),i=(0,n.WU)((0,r.k)(new Date(s),l),"yyyy-MM-dd"),d=(0,n.WU)((0,r.k)(new Date(s),1),"yyyy-MM-dd"),c=await fetch("/api/analytics?brand_id=".concat(a,"&from=").concat(i,"&to=").concat(d));if(c.ok){let e=await c.json();y(e.data||e)}}catch(e){C(e instanceof Error?e.message:"Failed to fetch analytics"),p(null),y(null)}finally{k(!1)}}};(0,l.useEffect)(()=>{s&&f&&a&&M()},[s,f,a]);let T=async()=>{if(a&&s&&f){Z(!0),C(null);try{if(!(await fetch("/api/analytics/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brand_id:a,from:s,to:f})})).ok)throw Error("Failed to sync analytics");await M()}catch(e){C(e instanceof Error?e.message:"Failed to sync analytics")}finally{Z(!1)}}};return a?(0,t.jsx)(d.r,{title:"Analytics",subtitle:"Track your social media performance",children:(0,t.jsxs)("div",{className:"space-y-6 p-6",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(c.z,{onClick:T,disabled:w,size:"lg",className:"gap-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 ".concat(w?"animate-spin":"")}),w?"Syncing...":"Sync Data"]})}),s&&f&&(0,t.jsx)(u,{from:s,to:f,onChange:(e,a)=>{h(e),j(a)}}),S&&(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-900 dark:bg-red-950",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),(0,t.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:S})]}),!v&&!(null==b?void 0:null===(e=b.dailyData)||void 0===e?void 0:e.length)&&!S&&(0,t.jsxs)("div",{className:"flex h-96 flex-col items-center justify-center rounded-lg border border-slate-200 bg-slate-50 dark:border-slate-800 dark:bg-slate-900",children:[(0,t.jsx)(x.Z,{className:"mb-3 h-12 w-12 text-slate-400 dark:text-slate-600"}),(0,t.jsx)("p",{className:"text-center text-slate-600 dark:text-slate-400",children:"No analytics data yet. Connect your social accounts and sync to see your performance."})]}),v&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)(o.Zb,{children:(0,t.jsxs)(o.aY,{className:"pt-6",children:[(0,t.jsx)(V,{className:"mb-4 h-6 w-24"}),(0,t.jsx)(V,{className:"h-8 w-16"}),(0,t.jsx)(V,{className:"mt-4 h-4 w-12"})]})},a))}),(0,t.jsx)(o.Zb,{children:(0,t.jsx)(o.aY,{className:"pt-6",children:(0,t.jsx)(V,{className:"h-80 w-full"})})}),(0,t.jsx)(o.Zb,{children:(0,t.jsx)(o.aY,{className:"pt-6",children:(0,t.jsx)(V,{className:"h-80 w-full"})})})]}),!v&&b&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(N,{data:b.totals,previousPeriod:null==g?void 0:g.totals}),(0,t.jsx)(F,{data:b.dailyData}),(0,t.jsx)(z,{data:b.dailyData}),b.platformBreakdown&&b.platformBreakdown.length>0&&(0,t.jsx)(L,{platforms:b.platformBreakdown})]})]})}):(0,t.jsx)(d.r,{title:"Analytics",subtitle:"Track your social media performance",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex h-96 items-center justify-center rounded-lg border border-slate-200 dark:border-slate-800",children:(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Please select a brand to view analytics"})})})})}},79820:function(e,a,s){"use strict";s.d(a,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var t=s(57437),l=s(2265),r=s(93448);let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...l})});n.displayName="Card";let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("h2",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-slate-500 dark:text-slate-400",s),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",s),...l})});o.displayName="CardContent",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"},40279:function(e,a,s){"use strict";s.d(a,{I:function(){return n}});var t=s(57437),l=s(2265),r=s(93448);let n=l.forwardRef((e,a)=>{let{className:s,type:l,...n}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...n})});n.displayName="Input"},82566:function(e,a,s){"use strict";s.d(a,{VT:function(){return r},an:function(){return t},kT:function(){return l}});let t={solo:1,starter:5,advanced:10},l={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},r=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}},function(e){e.O(0,[851,648,609,291,64,640,971,117,744],function(){return e(e.s=13123)}),_N_E=e.O()}]);