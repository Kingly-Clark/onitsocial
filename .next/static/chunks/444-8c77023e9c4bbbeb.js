"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{83460:function(e,t,a){a.d(t,{y:function(){return x}});var r=a(57437),s=a(2265),l=a(71533),n=a(88893),o=a(96362),i=a(18930),d=a(79820),c=a(69174),u=a(93448),f=a(82566);let b={draft:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",scheduled:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",published:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",failed:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"};function x(e){let{post:t,onEdit:a,onDelete:x,onClick:g}=e,[h,m]=(0,s.useState)(!1),[p,v]=(0,s.useState)(!1),[k,j]=(0,s.useState)(!1),w=(()=>{let e=t.platforms[0];return t.content[e]||t.content[Object.keys(t.content)[0]]||""})(),N=h?w:w.substring(0,150),y=async()=>{if(confirm("Delete this post?")){j(!0);try{if(!(await fetch("/api/posts/".concat(t.id),{method:"DELETE"})).ok)throw Error("Failed to delete post");null==x||x(t.id)}catch(e){console.error("Delete error:",e),alert("Failed to delete post")}finally{j(!1)}}},C=t.platforms.map(e=>f.VT.find(t=>t.id===e)||{id:e,label:e,color:"#999"});return(0,r.jsx)(d.Zb,{className:(0,u.cn)("cursor-pointer transition-all hover:shadow-md",g&&"hover:bg-slate-50 dark:hover:bg-slate-900"),onClick:()=>!p&&(null==g?void 0:g(t)),children:(0,r.jsxs)(d.aY,{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)(c.C,{className:(0,u.cn)("text-xs font-semibold",b[t.status]),variant:"secondary",children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),"scheduled"===t.status&&t.scheduled_for&&(0,r.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,u.p6)(t.scheduled_for)}),"published"===t.status&&t.published_at&&(0,r.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,u.SY)(t.published_at)})]}),(0,r.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:C.map(e=>(0,r.jsx)(c.C,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.label},e.id))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),v(!p)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:(0,r.jsx)(l.Z,{className:"h-4 w-4 text-slate-400"})}),p&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg z-10",children:["draft"===t.status&&(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),null==a||a(t),v(!1)},className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 first:rounded-t-lg",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),"Edit"]}),"published"===t.status&&t.platform_post_urls&&Object.entries(t.platform_post_urls).map(e=>{let[t,a]=e;return(0,r.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),"View on ",t]},t)}),(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),y(),v(!1)},disabled:k,className:"w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/30 flex items-center gap-2 last:rounded-b-lg",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),k?"Deleting...":"Delete"]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap",children:[N,w.length>150&&!h&&"..."]}),w.length>150&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),m(!h)},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:h?"Show less":"Show more"})]}),t.media_urls.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.media_urls.slice(0,4).map((e,a)=>(0,r.jsxs)("div",{className:"relative bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden",children:[(0,r.jsx)("img",{src:e,alt:"Media ".concat(a+1),className:"w-full h-16 object-cover",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23f3f4f6' width='100' height='100'/%3E%3C/svg%3E"}}),3===a&&t.media_urls.length>4&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white text-xs font-semibold",children:["+",t.media_urls.length-4]})})]},a))}),t.location&&(0,r.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["\uD83D\uDCCD ","object"==typeof t.location?t.location.name:t.location]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-800",children:[(0,r.jsxs)("span",{children:["Posted ",(0,u.SY)(t.created_at)]}),"scheduled"===t.status&&t.scheduled_for&&(0,r.jsxs)("span",{children:["Scheduled for ",(0,u.p6)(t.scheduled_for)]})]})]})})}},31444:function(e,t,a){a.d(t,{p:function(){return u}});var r=a(57437),s=a(2265),l=a(51817),n=a(17168),o=a(12381),i=a(83460),d=a(9644);let c=[{value:"all",label:"All Posts"},{value:"drafts",label:"Drafts",status:"draft"},{value:"scheduled",label:"Scheduled",status:"scheduled"},{value:"published",label:"Published",status:"published"},{value:"failed",label:"Failed",status:"failed"}];function u(e){let{onEditPost:t,onPostsLoaded:a}=e,{activeBrandId:u}=(0,d.o)(),[f,b]=(0,s.useState)("all"),[x,g]=(0,s.useState)([]),[h,m]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),[k,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(0),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(u){m(!0),v(null);try{var t;let r="all"===f?"":"&status=".concat(null===(t=c.find(e=>e.value===f))||void 0===t?void 0:t.status),s=await fetch("/api/posts?brandId=".concat(u,"&limit=").concat(20,"&offset=").concat(e).concat(r));if(!s.ok)throw Error("Failed to fetch posts");let l=await s.json();g(0===e?l.data:[...x,...l.data]),N(e+20),j(l.count>e+20),null==a||a(l.data)}catch(e){v(e instanceof Error?e.message:"Failed to load posts")}finally{m(!1)}}};(0,s.useEffect)(()=>{N(0),y(0)},[u,f]);let C=e=>{g(t=>t.filter(t=>t.id!==e))},S="all"===f?x:x.filter(e=>{var t;let a=null===(t=c.find(e=>e.value===f))||void 0===t?void 0:t.status;return!a||e.status===a}),_=()=>(0,r.jsx)("div",{className:"space-y-3 animate-pulse",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"h-32 rounded-lg bg-slate-200 dark:bg-slate-800"},e))});return(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(n.mQ,{defaultValue:"all",value:f,onValueChange:e=>b(e),children:[(0,r.jsx)(n.dr,{className:"grid w-full grid-cols-5",children:c.map(e=>(0,r.jsx)(n.SP,{value:e.value,className:"text-xs sm:text-sm",children:e.label},e.value))}),c.map(e=>(0,r.jsx)(n.nU,{value:e.value,className:"space-y-4 mt-4",children:h&&0===S.length?(0,r.jsx)(_,{}):p&&0===S.length?(0,r.jsx)("div",{className:"rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950 p-4 text-sm text-red-700 dark:text-red-300",children:p}):0===S.length?(0,r.jsx)("div",{className:"rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700 p-8 text-center",children:(0,r.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"all"===f?"No posts yet. Create your first post to get started!":"No ".concat(e.label.toLowerCase()," yet.")})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:S.map(e=>(0,r.jsx)(i.y,{post:e,onEdit:t,onDelete:C},e.id))}),k&&(0,r.jsx)("div",{className:"flex justify-center pt-4",children:(0,r.jsxs)(o.z,{onClick:()=>y(w),disabled:h,variant:"outline",className:"gap-2",children:[h&&(0,r.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),"Load More"]})})]})},e.value))]})})}},69174:function(e,t,a){a.d(t,{C:function(){return o}});var r=a(57437);a(2265);var s=a(90535),l=a(93448);let n=(0,s.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border border-transparent bg-brand-500 text-white hover:bg-brand-600",secondary:"border border-transparent bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-700",destructive:"border border-transparent bg-red-500 text-white hover:bg-red-600",outline:"border border-slate-200 text-slate-950 dark:border-slate-800 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:a}),t),...s})}},12381:function(e,t,a){a.d(t,{z:function(){return i}});var r=a(57437),s=a(2265),l=a(90535),n=a(93448);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-brand-500 text-white hover:bg-brand-600 active:bg-brand-700",destructive:"bg-red-500 text-white hover:bg-red-600 active:bg-red-700",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/70",link:"text-brand-500 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,...i}=e;return(0,r.jsx)("button",{className:(0,n.cn)(o({variant:s,size:l,className:a})),ref:t,...i})});i.displayName="Button"},79820:function(e,t,a){a.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return i}});var r=a(57437),s=a(2265),l=a(93448);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h2",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},17168:function(e,t,a){a.d(t,{SP:function(){return c},dr:function(){return d},mQ:function(){return i},nU:function(){return u}});var r=a(57437),s=a(2265),l=a(93448);let n=s.createContext(void 0);function o(){let e=s.useContext(n);if(!e)throw Error("Tabs components must be used within Tabs");return e}function i(e){let{children:t,defaultValue:a,value:l,onValueChange:o}=e,[i,d]=s.useState(a);return(0,r.jsx)(n.Provider,{value:{activeTab:void 0!==l?l:i,setActiveTab:e=>{void 0===l&&d(e),null==o||o(e)}},children:t})}let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500 dark:bg-slate-800 dark:text-slate-400",a),...s})});d.displayName="TabsList";let c=s.forwardRef((e,t)=>{let{className:a,value:s,onClick:n,...i}=e,{activeTab:d,setActiveTab:c}=o(),u=d===s;return(0,r.jsx)("button",{ref:t,onClick:e=>{c(s),null==n||n(e)},className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u?"bg-white text-slate-950 shadow-sm dark:bg-slate-950 dark:text-slate-50":"text-slate-600 hover:text-slate-950 dark:text-slate-400 dark:hover:text-slate-50",a),...i})});c.displayName="TabsTrigger";let u=s.forwardRef((e,t)=>{let{className:a,value:s,...n}=e,{activeTab:i}=o();return i!==s?null:(0,r.jsx)("div",{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});u.displayName="TabsContent"},93448:function(e,t,a){a.d(t,{SY:function(){return i},S_:function(){return d},cn:function(){return l},p6:function(){return n},uf:function(){return o}});var r=a(61994),s=a(53335);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}function n(e,t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",...t}).format(new Date(e))}function o(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString()}function i(e){let t=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(t<1)return"just now";if(t<60)return"".concat(t,"m ago");let a=Math.floor(t/60);if(a<24)return"".concat(a,"h ago");let r=Math.floor(a/24);return r<7?"".concat(r,"d ago"):n(e)}function d(e){return({facebook:"#1877F2",instagram:"#E4405F",tiktok:"#000000",youtube:"#FF0000",linkedin:"#0A66C2",google_business:"#4285F4"})[e]||"#6B7280"}},9644:function(e,t,a){a.d(t,{o:function(){return r}});let r=(0,a(3011).U)((e,t)=>({brands:[],activeBrandId:null,accounts:[],setBrands:t=>e({brands:t}),setActiveBrand:t=>e({activeBrandId:t}),setAccounts:t=>e({accounts:t}),getActiveBrand:()=>{let{brands:e,activeBrandId:a}=t();return e.find(e=>e.id===a)}}))},82566:function(e,t,a){a.d(t,{VT:function(){return l},an:function(){return r},kT:function(){return s}});let r={solo:1,starter:5,advanced:10},s={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},l=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}}]);