"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{83460:function(e,t,a){a.d(t,{y:function(){return b}});var s=a(57437),l=a(2265),r=a(71533),n=a(88893),d=a(96362),o=a(18930),i=a(79820),c=a(69174),u=a(93448),x=a(82566);let f={draft:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",scheduled:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",published:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",failed:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"};function b(e){let{post:t,onEdit:a,onDelete:b,onClick:m}=e,[h,p]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),[k,j]=(0,l.useState)(!1),N=(()=>{let e=t.platforms[0];return t.content[e]||t.content[Object.keys(t.content)[0]]||""})(),w=h?N:N.substring(0,150),y=async()=>{if(confirm("Delete this post?")){j(!0);try{if(!(await fetch("/api/posts/".concat(t.id),{method:"DELETE"})).ok)throw Error("Failed to delete post");null==b||b(t.id)}catch(e){console.error("Delete error:",e),alert("Failed to delete post")}finally{j(!1)}}},C=t.platforms.map(e=>x.VT.find(t=>t.id===e)||{id:e,label:e,color:"#999"});return(0,s.jsx)(i.Zb,{className:(0,u.cn)("cursor-pointer transition-all hover:shadow-md",m&&"hover:bg-slate-50 dark:hover:bg-slate-900"),onClick:()=>!g&&(null==m?void 0:m(t)),children:(0,s.jsxs)(i.aY,{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(c.C,{className:(0,u.cn)("text-xs font-semibold",f[t.status]),variant:"secondary",children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),"scheduled"===t.status&&t.scheduled_for&&(0,s.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,u.p6)(t.scheduled_for)}),"published"===t.status&&t.published_at&&(0,s.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:(0,u.SY)(t.published_at)})]}),(0,s.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:C.map(e=>(0,s.jsx)(c.C,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),v(!g)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:(0,s.jsx)(r.Z,{className:"h-4 w-4 text-slate-400"})}),g&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg z-10",children:["draft"===t.status&&(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),null==a||a(t),v(!1)},className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 first:rounded-t-lg",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),"Edit"]}),"published"===t.status&&t.platform_post_urls&&Object.entries(t.platform_post_urls).map(e=>{let[t,a]=e;return(0,s.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 text-sm text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"View on ",t]},t)}),(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),y(),v(!1)},disabled:k,className:"w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950/30 flex items-center gap-2 last:rounded-b-lg",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),k?"Deleting...":"Delete"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap",children:[w,N.length>150&&!h&&"..."]}),N.length>150&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),p(!h)},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:h?"Show less":"Show more"})]}),t.media_urls.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.media_urls.slice(0,4).map((e,a)=>(0,s.jsxs)("div",{className:"relative bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:e,alt:"Media ".concat(a+1),className:"w-full h-16 object-cover",onError:e=>{e.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23f3f4f6' width='100' height='100'/%3E%3C/svg%3E"}}),3===a&&t.media_urls.length>4&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-white text-xs font-semibold",children:["+",t.media_urls.length-4]})})]},a))}),t.location&&(0,s.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["\uD83D\uDCCD ","object"==typeof t.location?t.location.name:t.location]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-800",children:[(0,s.jsxs)("span",{children:["Posted ",(0,u.SY)(t.created_at)]}),"scheduled"===t.status&&t.scheduled_for&&(0,s.jsxs)("span",{children:["Scheduled for ",(0,u.p6)(t.scheduled_for)]})]})]})})}},31444:function(e,t,a){a.d(t,{p:function(){return u}});var s=a(57437),l=a(2265),r=a(51817),n=a(17168),d=a(12381),o=a(83460),i=a(9644);let c=[{value:"all",label:"All Posts"},{value:"drafts",label:"Drafts",status:"draft"},{value:"scheduled",label:"Scheduled",status:"scheduled"},{value:"published",label:"Published",status:"published"},{value:"failed",label:"Failed",status:"failed"}];function u(e){let{onEditPost:t,onPostsLoaded:a}=e,{activeBrandId:u}=(0,i.o)(),[x,f]=(0,l.useState)("all"),[b,m]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[g,v]=(0,l.useState)(null),[k,j]=(0,l.useState)(!1),[N,w]=(0,l.useState)(0),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(u){p(!0),v(null);try{var t;let s="all"===x?"":"&status=".concat(null===(t=c.find(e=>e.value===x))||void 0===t?void 0:t.status),l=await fetch("/api/posts?brandId=".concat(u,"&limit=").concat(20,"&offset=").concat(e).concat(s));if(!l.ok)throw Error("Failed to fetch posts");let r=await l.json();m(0===e?r.data:[...b,...r.data]),w(e+20),j(r.count>e+20),null==a||a(r.data)}catch(e){v(e instanceof Error?e.message:"Failed to load posts")}finally{p(!1)}}};(0,l.useEffect)(()=>{w(0),y(0)},[u,x]);let C=e=>{m(t=>t.filter(t=>t.id!==e))},S="all"===x?b:b.filter(e=>{var t;let a=null===(t=c.find(e=>e.value===x))||void 0===t?void 0:t.status;return!a||e.status===a}),_=()=>(0,s.jsx)("div",{className:"space-y-3 animate-pulse",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-32 rounded-lg bg-slate-200 dark:bg-slate-800"},e))});return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)(n.mQ,{defaultValue:"all",value:x,onValueChange:e=>f(e),children:[(0,s.jsx)("div",{className:"overflow-x-auto -mx-1 px-1",children:(0,s.jsx)(n.dr,{className:"inline-flex w-max min-w-full sm:w-full sm:grid sm:grid-cols-5 gap-1",children:c.map(e=>(0,s.jsx)(n.SP,{value:e.value,className:"text-xs sm:text-sm whitespace-nowrap px-3 sm:px-2",children:e.label},e.value))})}),c.map(e=>(0,s.jsx)(n.nU,{value:e.value,className:"space-y-4 mt-4",children:h&&0===S.length?(0,s.jsx)(_,{}):g&&0===S.length?(0,s.jsx)("div",{className:"rounded-lg border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950 p-4 text-sm text-red-700 dark:text-red-300",children:g}):0===S.length?(0,s.jsx)("div",{className:"rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700 p-8 text-center",children:(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"all"===x?"No posts yet. Create your first post to get started!":"No ".concat(e.label.toLowerCase()," yet.")})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:S.map(e=>(0,s.jsx)(o.y,{post:e,onEdit:t,onDelete:C},e.id))}),k&&(0,s.jsx)("div",{className:"flex justify-center pt-4",children:(0,s.jsxs)(d.z,{onClick:()=>y(N),disabled:h,variant:"outline",className:"gap-2",children:[h&&(0,s.jsx)(r.Z,{className:"h-4 w-4 animate-spin"}),"Load More"]})})]})},e.value))]})})}},69174:function(e,t,a){a.d(t,{C:function(){return d}});var s=a(57437);a(2265);var l=a(90535),r=a(93448);let n=(0,l.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border border-transparent bg-brand-500 text-white hover:bg-brand-600",secondary:"border border-transparent bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-700",destructive:"border border-transparent bg-red-500 text-white hover:bg-red-600",outline:"border border-slate-200 text-slate-950 dark:border-slate-800 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...l}=e;return(0,s.jsx)("div",{className:(0,r.cn)(n({variant:a}),t),...l})}},79820:function(e,t,a){a.d(t,{Ol:function(){return d},SZ:function(){return i},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var s=a(57437),l=a(2265),r=a(93448);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",a),...l})});n.displayName="Card";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});d.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h2",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-slate-500 dark:text-slate-400",a),...l})});i.displayName="CardDescription";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},17168:function(e,t,a){a.d(t,{SP:function(){return c},dr:function(){return i},mQ:function(){return o},nU:function(){return u}});var s=a(57437),l=a(2265),r=a(93448);let n=l.createContext(void 0);function d(){let e=l.useContext(n);if(!e)throw Error("Tabs components must be used within Tabs");return e}function o(e){let{children:t,defaultValue:a,value:r,onValueChange:d}=e,[o,i]=l.useState(a);return(0,s.jsx)(n.Provider,{value:{activeTab:void 0!==r?r:o,setActiveTab:e=>{void 0===r&&i(e),null==d||d(e)}},children:t})}let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500 dark:bg-slate-800 dark:text-slate-400",a),...l})});i.displayName="TabsList";let c=l.forwardRef((e,t)=>{let{className:a,value:l,onClick:n,...o}=e,{activeTab:i,setActiveTab:c}=d(),u=i===l;return(0,s.jsx)("button",{ref:t,onClick:e=>{c(l),null==n||n(e)},className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u?"bg-white text-slate-950 shadow-sm dark:bg-slate-950 dark:text-slate-50":"text-slate-600 hover:text-slate-950 dark:text-slate-400 dark:hover:text-slate-50",a),...o})});c.displayName="TabsTrigger";let u=l.forwardRef((e,t)=>{let{className:a,value:l,...n}=e,{activeTab:o}=d();return o!==l?null:(0,s.jsx)("div",{ref:t,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});u.displayName="TabsContent"},82566:function(e,t,a){a.d(t,{VT:function(){return r},an:function(){return s},kT:function(){return l}});let s={solo:1,starter:5,advanced:10},l={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},r=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}}]);