"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{68755:function(e,t,r){r.d(t,{Z:function(){return u}});var a=r(2265);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:f,...m}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:o?24*Number(l)/Number(s):l,className:n("lucide",c),...!u&&!d(m)&&{"aria-hidden":"true"},...m},[...f.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:i,...d}=r;return(0,a.createElement)(c,{ref:l,iconNode:t,className:n("lucide-".concat(s(o(e))),"lucide-".concat(e),i),...d})});return r.displayName=o(e),r}},30401:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},15001:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},99397:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},32489:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(68755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},99376:function(e,t,r){var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},99029:function(e,t,r){r.d(t,{E:function(){return h}});var a=r(57437),n=r(2265),s=r(30401),l=r(15001),o=r(32489),i=r(99397),d=r(79820),c=r(12381),u=r(69174),f=r(96246),m=r(82566);function h(e){let{brandId:t,connectedAccounts:r=[],onConnect:h,onDisconnect:x}=e,[p,b]=(0,n.useState)(null),[g,v]=(0,n.useState)(null),[w,k]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.type)==="CONNECTION_SUCCESS"&&(b(null),null==h||h())};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[h]);let y=new Set(r.map(e=>e.platform)),j=async e=>{k(""),b(e);try{let r=await fetch("/api/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brandId:t,platform:e})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to get connection URL")}let a=await r.json();if(a.data.url){let e=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-600)/2,r=window.open(a.data.url,"OAuthConnect","width=".concat(500,",height=").concat(600,",left=").concat(e,",top=").concat(t));if(!r)throw Error("Failed to open connection window");let n=setInterval(()=>{r.closed&&(clearInterval(n),null==h||h())},500)}}catch(e){k(e instanceof Error?e.message:"Failed to connect platform")}finally{b(null)}},N=async e=>{if(confirm("Are you sure you want to disconnect this account?")){v(e),k("");try{let t=await fetch("/api/connections/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disconnect account")}null==x||x(e)}catch(e){k(e instanceof Error?e.message:"Failed to disconnect account")}finally{v(null)}}};return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-50 mb-4",children:"Connected Platforms"}),w&&(0,a.jsx)("div",{className:"rounded-lg bg-red-50 dark:bg-red-950 p-3 mb-4 text-sm text-red-700 dark:text-red-300",children:w}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.VT.map(e=>{var t,n;let m=y.has(e.id),h=r.find(t=>t.platform===e.id);return(0,a.jsx)(d.Zb,{className:"overflow-hidden transition-all ".concat(m?"border-green-200 dark:border-green-800":""),children:(0,a.jsxs)(d.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:e.color},children:e.icon[0]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-50",children:e.label}),m&&(null==h?void 0:h.platform_username)&&(0,a.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["@",h.platform_username]})]})]}),m&&(0,a.jsx)(s.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"})]}),m&&(null==h?void 0:h.platform_avatar)?(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 p-2 rounded-lg bg-slate-50 dark:bg-slate-900",children:[(0,a.jsxs)(f.qE,{className:"h-8 w-8",children:[(0,a.jsx)(f.F$,{src:h.platform_avatar}),(0,a.jsx)(f.Q5,{children:(null===(n=h.platform_username)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.toUpperCase())||"A"})]}),(0,a.jsxs)("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate",children:["Connected as ",h.platform_username]})]}):null,(0,a.jsx)("div",{className:"flex gap-2",children:m?(0,a.jsx)(c.z,{size:"sm",variant:"destructive",onClick:()=>h&&N(h.id),disabled:g===(null==h?void 0:h.id),className:"flex-1 gap-2",children:g===(null==h?void 0:h.id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),"Disconnecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Disconnect"]})}):(0,a.jsx)(c.z,{size:"sm",onClick:()=>j(e.id),disabled:p===e.id,className:"flex-1 gap-2",children:p===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}),"Connecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),"Connect"]})})}),(null==h?void 0:h.status)&&"active"!==h.status&&(0,a.jsx)(u.C,{variant:"secondary",className:"mt-2 w-full justify-center text-xs capitalize",children:h.status})]})},e.id)})})]})})}},69174:function(e,t,r){r.d(t,{C:function(){return o}});var a=r(57437);r(2265);var n=r(90535),s=r(93448);let l=(0,n.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border border-transparent bg-brand-500 text-white hover:bg-brand-600",secondary:"border border-transparent bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-700",destructive:"border border-transparent bg-red-500 text-white hover:bg-red-600",outline:"border border-slate-200 text-slate-950 dark:border-slate-800 dark:text-slate-50"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(l({variant:r}),t),...n})}},79820:function(e,t,r){r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var a=r(57437),n=r(2265),s=r(93448);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",r),...n})});l.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h2",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-slate-500 dark:text-slate-400",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},40279:function(e,t,r){r.d(t,{I:function(){return l}});var a=r(57437),n=r(2265),s=r(93448);let l=n.forwardRef((e,t)=>{let{className:r,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},82566:function(e,t,r){r.d(t,{VT:function(){return s},an:function(){return a},kT:function(){return n}});let a={solo:1,starter:5,advanced:10},n={solo:{monthly:5,label:"Solo"},starter:{monthly:10,label:"Starter"},advanced:{monthly:20,label:"Advanced"}},s=[{id:"facebook",label:"Facebook",color:"#1877F2",icon:"Facebook"},{id:"instagram",label:"Instagram",color:"#E4405F",icon:"Instagram"},{id:"tiktok",label:"TikTok",color:"#000000",icon:"Music"},{id:"youtube",label:"YouTube",color:"#FF0000",icon:"Youtube"},{id:"linkedin",label:"LinkedIn",color:"#0A66C2",icon:"Linkedin"},{id:"google_business",label:"Google Business",color:"#4285F4",icon:"MapPin"}]}}]);